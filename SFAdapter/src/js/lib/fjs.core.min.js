'use strict';Function.prototype.extend=function(a){var c=new Function;c.prototype=a.prototype;this.prototype=new c;this.prototype.constructor=this;this.prototype.superClass=a.prototype;for(c=1;c<arguments.length;++c){var b=arguments[c],d;for(d in b.prototype)this.prototype[d]||(this.prototype[d]=b.prototype[d]);this.prototype[b.prototype.__class_name]=b.prototype}};var namespace=function(a){for(var a=a.split("."),c=self[a[0]]=self[a[0]]||{},b=1;b<a.length;b++)var d=a[b],c=c[d]=c[d]||{};return c};
namespace("fjs.utils");fjs.utils.Array=function(){};fjs.utils.Array.isArray=function(a){return Array.isArray(a)||"object"===typeof a&&"[object Array]"===a+""};
(function(){function a(){if(null==c){var a=-1,b,d;"Microsoft Internet Explorer"==navigator.appName?(b=navigator.userAgent,d=/MSIE ([0-9]{1,}[.0-9]{0,})/,null!=d.exec(b)&&(a=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(b=navigator.userAgent,d=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/,null!=d.exec(b)&&(a=parseFloat(RegExp.$1)));return c=a}return c}namespace("fjs.utils");var c=null;fjs.utils.Browser=function(){};fjs.utils.Browser.getIEVersion=a;var b=fjs.utils.Browser,d;d=-1!=a()?function(){return!0}:
function(){return!1};b.isIE=d;b=fjs.utils.Browser;d=7==a()?function(){return!0}:function(){return!1};b.isIE7=d;b=fjs.utils.Browser;d=8==a()?function(){return!0}:function(){return!1};b.isIE8=d;b=fjs.utils.Browser;d=9==a()?function(){return!0}:function(){return!1};b.isIE9=d;b=fjs.utils.Browser;d=10==a()?function(){return!0}:function(){return!1};b.isIE10=d;b=fjs.utils.Browser;d=11==a()?function(){return!0}:function(){return!1};b.isIE11=d;b=fjs.utils.Browser;d=/chrom(e|ium)/i.test(navigator.userAgent)?
function(){return!0}:function(){return!1};b.isChrome=d;b=fjs.utils.Browser;d=/firefox/i.test(navigator.userAgent)?function(){return!0}:function(){return!1};b.isFirefox=d;b=fjs.utils.Browser;d=/safari/i.test(navigator.userAgent)?function(){return!0}:function(){return!1};b.isSafari=d;b=fjs.utils.Browser;d=/Opera/i.test(navigator.userAgent)?function(){return!0}:function(){return!1};b.isOpera=d})();
(function(){namespace("fjs.utils");fjs.utils.Cookies={get:function(a){return(a=document.cookie.match(RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(a[1]):void 0},set:function(a,c,b){var b=b||{},d=b.expires;if("number"==typeof d&&d){var f=new Date;f.setTime(f.getTime()+1E3*d);d=b.expires=f}d&&d.toUTCString&&(b.expires=d.toUTCString());var c=encodeURIComponent(c),a=a+"="+c,g;for(g in b)b.hasOwnProperty(g)&&(a+="; "+g,c=b[g],!0!==c&&(a+="="+c));document.cookie=
a},remove:function(a){fjs.utils.Cookies.set(a,"",{expires:-1})}}})();(function(){namespace("fjs.utils");fjs.utils.Core={asyncForIn:function(a,c,b){function d(){if(g===f.length)b();else{var e=f[g];c(e,a[e],d);g++}}var f=[],g=0,e;for(e in a)a.hasOwnProperty(e)&&f.push(e);d()}}})();namespace("fjs.utils");fjs.utils.DOM=function(){};
fjs.utils.DOM.getElementOffset=function(a){if(void 0!=a){var c=null;try{c=a.getBoundingClientRect()}catch(b){c={top:0,left:0,right:0,bottom:0}}var a=document.body,d=document.documentElement;return{x:c.left+(window.pageXOffset||d.scrollLeft||a.scrollLeft)-(d.clientLeft||a.clientLeft||0),y:c.top+(window.pageYOffset||d.scrollTop||a.scrollTop)-(d.clientTop||a.clientTop||0)}}};
fjs.utils.DOM.addClass=function(a,c){this.hasClass(a,c)||(a.classList?a.classList.add(c):a.className=(a.className+=" "+c).trim());return a};fjs.utils.DOM.hasClass=function(a,c){return a.classList?a.classList.contains(c):RegExp("(^| )"+c+"( |$)","gi").test(a.className)};fjs.utils.DOM.removeClass=function(a,c){a.classList?a.classList.remove(c):a.className=a.className.replace(RegExp("(^|\\b)"+c.split(" ").join("|")+"(\\b|$)","gi")," ").trim();return a};
fjs.utils.DOM.toggleClass=function(a,c){return this.hasClass(a,c)?this.removeClass(a,c):this.addClass(a,c)};fjs.utils.DOM.addEventListener=function(a,c,b){c="mousewheel"==c?"DOMMouseScroll":c;window.addEventListener?a.addEventListener(c,b,!1):document.attachEvent&&(a==window?window.document.attachEvent("on"+c,b):a.attachEvent("on"+c,b));"DOMMouseScroll"==c&&(a.onmousewheel=b)};
fjs.utils.DOM.removeEventListener=function(a,c,b){c="mousewheel"==c?"DOMMouseScroll":c;window.removeEventListener?a.removeEventListener(c,b,!1):document.detachEvent&&(a==window?document.detachEvent("on"+c,b):a.detachEvent("on"+c,b));"DOMMouseScroll"==c&&(a.onmousewheel=null)};
fjs.utils.DOM.createEvent=function(a,c,b){if(document.createEvent){var d=document.createEvent(a);switch(a){case "MouseEvents":d.initMouseEvent(c,!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null);break;case "UIEvents":d.initUIEvent(c,!0,!0,window,1);break;case "HTMLEvents":d.initEvent(c,!1,!0);break;default:d.initEvent(c,!0,!0)}if(b)for(var f in b)b.hasOwnProperty(f)&&(d[f]=b[f]);return d}b||(b={type:c});return document.createEventObject(b)};
fjs.utils.DOM.dispatchEvent=function(a,c){document.createEvent?a.dispatchEvent(c):a.fireEvent("on"+c.type,c)};(function(){function a(){(new Date).getSeconds();return(65536*(1+Math.random())).toString(16).substring(1,5)}fjs.utils.GUID={};fjs.utils.GUID.empty="00000000-0000-0000-0000-000000000000";fjs.utils.GUID.create=function(){return(a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()).toUpperCase()}})();
(function(){fjs.utils.Increment=function(){if(this.constructor.__instance)return this.constructor.__instance;this.constructor.__instance=this;this.counters={}};fjs.utils.Increment.prototype.get=function(a){this.counters[a]||(this.counters[a]=0);return++this.counters[a]};fjs.utils.Increment.prototype.clear=function(a){this.counters[a]=0}})();
(function(){namespace("fjs.utils");var a=fjs.utils.JSON=function(){};fjs.utils.JSON.parse=function(a){var b=null;if("string"==typeof a)try{b=JSON.parse(a)}catch(d){try{b=(new Function("return "+a+";"))()}catch(f){throw Error("Sync data error",f);}}else b=a;return b};fjs.utils.JSON.check=function(c){var b=!1;try{a.parse(c),b=!0}catch(d){}return b};fjs.utils.JSON.stringify=function(a){return"string"==typeof a?a:JSON.stringify(a)};fjs.utils.JSON.isEmpty=function(a){var b=!1,d;for(d in a)if(a.hasOwnProperty(d)){b=
!0;break}return!b}})();namespace("fjs.utils");fjs.utils.URL=function(){};fjs.utils.URL.getOrigin=function(){return window.location.origin||location.protocol+"//"+location.host+(/:/.test(location.host)?"":location.port?":"+location.port:"")};fjs.utils.URL.getFileExtension=function(a){a=/\.\w+($|\/$)/.exec(a);return null!=a?0<a.length?a[0]:"":""};fjs.utils.URL.getFileName=function(a){return-1!=a.lastIndexOf("/")?a.substring(a.lastIndexOf("/")+1).trim():a.substring(a.lastIndexOf("\\")+1).trim()};
fjs.utils.URL.getAbsoluteURL=function(a){var c=document.createElement("div");c.innerHTML='<a href="'+encodeURI(a)+'">x</a>';return c.firstChild.href};namespace("fjs.utils");fjs.utils.TimeSync=function(){if(fjs.utils.TimeSync.__instance)return fjs.utils.TimeSync.__instance;fjs.utils.TimeSync.__instance=this;this.fdpTimestamp=0};fjs.utils.TimeSync.prototype.setTimestamp=function(a){a=parseInt(a);this.fdpTimestamp=(new Date).getTime()-a};fjs.utils.TimeSync.prototype.getDefault=function(){return this.fdpTimestamp};
namespace("fjs.ajax");fjs.ajax.IAjaxProvider=function(){};fjs.ajax.IAjaxProvider.prototype.abort=function(){};fjs.ajax.IAjaxProvider.prototype.send=function(){};
(function(){namespace("fjs.ajax");fjs.ajax.IFrameRequest=function(a){this.id=a;this.status=0;this.responseText="";this.headers=this.postData=this.url=this.method=null};var a=fjs.ajax.IFrameAjax=function(c){if(this.constructor.__instance)return this.constructor.__instance;this.constructor.__instance=this;var b=this;this.host=c;this.status=a.states.NOT_INITIALIZED;this.suspendRequestes=[];this.listeners={};this.requests={};(this.crdmnFrame=document.getElementById("crdmnFrame"))?b.status=a.states.READY:
(this.status=a.states.INITIALIZATION,this.crdmnFrame=document.createElement("iframe"),this.crdmnFrame.name=this.crdmnFrame.id="crdmnFrame",this.crdmnFrame.src=this.host,this.crdmnFrame.onload=function(){b.status=a.states.READY;for(var c=0;c<b.suspendRequestes.length;c++)b.send(null,null,null,null,null,b.suspendRequestes[c])},document.body.appendChild(this.crdmnFrame),window.addEventListener?window.addEventListener("message",function(a){b.onResponse(a)},!1):window.attachEvent&&window.attachEvent("onmessage",
function(a){b.onResponse(a)}))};fjs.ajax.IFrameAjax.states={NOT_INITIALIZED:-1,INITIALIZATION:0,READY:1};fjs.ajax.IFrameAjax.prototype.send=function(c,b,d,f,g,e){e||(e=new fjs.ajax.IFrameRequest((new fjs.utils.Increment).get("IFrameAjaxRequest")),e.method=c,e.postData=f,e.url=b,e.headers=d,this.listeners[e.id]=g);this.status!=a.states.READY?this.suspendRequestes.push(e):(this.crdmnFrame.contentWindow.postMessage(JSON.stringify({type:"send",data:e}),"*"),this.requests[e.id]=e);return e};fjs.ajax.IFrameAjax.prototype.abort=
function(a){this.crdmnFrame.contentWindow.postMessage(fjs.utils.JSON.stringify({type:"abort",data:a}),"*");a.aborted=!0;a.status=0;if(this.listeners[a.id])this.listeners[a.id](a,"",!1);delete this.listeners[a.id];delete this.requests[a.id]};fjs.ajax.IFrameAjax.prototype.onResponse=function(a){if((a=fjs.utils.JSON.parse(a.data))&&"IFrameAjaxRequest"==a.type){var a=a.data,b=a.id,d=this.requests[b];if(d){d.status=a.status;d.responseText=a.responseText;var f=this.listeners[b];f&&(a.error?f(d,d.responseText,
!1):f(d,d.responseText,!0),delete this.listeners[b])}delete this.requests[b]}}})();
(function(){namespace("fjs.ajax");fjs.ajax.XDRAjax=function(){if(this.constructor.__instance)return this.constructor.__instance;this.constructor.__instance=this};fjs.ajax.XDRAjax.prototype.send=function(a,c,b,d,f){var g=new XDomainRequest;g._onerror=g.onerror=function(a){a=a||window.event;a=a.target||g;f(a,a.responseText,!1)};g.onload=function(a){a=a||window.event;a=a.target||g;a.status=200;f(a,a.responseText,!0)};for(var e in b)b.hasOwnProperty(e)&&(c+=(/\?/.test(c)?"&":"?")+e+"="+b[e]);g.open(a,
c);g.send(d);return g};fjs.ajax.XDRAjax.prototype.abort=function(a){a.aborted=!0;a.status=0;a.abort();a._onerror({target:a})}})();
(function(){namespace("fjs.ajax");var a=fjs.ajax.XHRAjax=function(){if(this.constructor.__instance)return this.constructor.__instance;this.constructor.__instance=this};fjs.ajax.XHRAjax.states={REQUEST_NOT_INITIALIZED:0,REQUEST_CONNECTION_ESTABLISHED:1,REQUEST_RECEIVED:2,REQUEST_PROCESSING:3,REQUEST_COMPLETED:4};fjs.ajax.XHRAjax.prototype.getXmlHttp=function(){var a;try{a=new XMLHttpRequest}catch(b){try{a=ActiveXObject("Msxml2.XMLHTTP")}catch(d){try{a=ActiveXObject("Microsoft.XMLHTTP")}catch(f){a=
null}}}return a};fjs.ajax.XHRAjax.prototype.getParamData=function(a){var b=[],d;for(d in a)a.hasOwnProperty(d)&&b.push(d+"="+a[d]);return b.join("&")};fjs.ajax.XHRAjax.prototype.send=function(c,b,d,f,g){var e=this.getXmlHttp(),h;e.open(c,b);e.setRequestHeader("Content-type","application/x-www-form-urlencoded");if(d)for(h in d)d.hasOwnProperty(h)&&e.setRequestHeader(h,d[h]);e.onreadystatechange=function(){if(e.readyState===a.states.REQUEST_COMPLETED&&g)try{200===e.status?g(e,e.responseText,!0):g(e,
e.responseText,!1)}catch(b){g({status:0,responseText:"",aborted:!0},"",!1)}};e.send(this.getParamData(f));return e};fjs.ajax.XHRAjax.prototype.abort=function(c){c&&c.readyState!==a.states.REQUEST_COMPLETED&&(c.aborted=!0,c.abort())}})();fjs.EventsSource=function(){this.listeners={}};fjs.EventsSource.prototype.addEventListener=function(a,c){var b=this.listeners[a];b||(b=this.listeners[a]=[]);0>b.indexOf(c)?b.push(c):console.warn("Trying to add same listener")};
fjs.EventsSource.prototype.removeEventListener=function(a,c){var b=this.listeners[a],d;b&&-1<(d=b.indexOf(c))?b.splice(d,1):console.warn("Trying to remove not existed listener")};fjs.EventsSource.prototype.fireEvent=function(a,c){var b=this.listeners[a];if(b)for(var d=b.slice(0),f=0;f<d.length;f++)if(-1<b.indexOf(d[f]))d[f](c)};
