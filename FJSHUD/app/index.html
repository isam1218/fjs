<!doctype html>
<html class="no-js" ng-app="fjshudApp" watch-window-resize>
  <head>
    <meta charset="utf-8">
    <title>Fonality HUDWeb</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0">
	<link type="image/x-icon" rel="icon" href="img/XFavicon.ico">
    <link rel="stylesheet" href="styles/main.css">   
    <!--[if lt IE ]> 
        <link rel="stylesheet" href="styles/ie.css">  
    <![endif]-->
  	<script type="text/javascript">   	
			(function(){				
				var uv=document.createElement('script');
				uv.type='text/javascript';
				uv.async=true;
				uv.src='//widget.uservoice.com/Tn3xl4wYXZ7m5rjTNJnOQ.js';
				var s=document.getElementsByTagName('script')[0];
				s.parentNode.insertBefore(uv,s);
					            
	            var isIE11 = !!navigator.userAgent.match(/Trident.*rv[ :]*11\./);
	            var isIE10 = !!navigator.userAgent.match(/Trident.*rv[ :]*10\./);
				var agent = navigator.userAgent.toLowerCase();
	            var links = document.getElementsByTagName('link');
				
	            if(isIE10 || isIE11) {	                    	
	              var ie_css = document.createElement('link');
	              ie_css.setAttribute('rel','stylesheet');
	              ie_css.setAttribute('href','styles/ie.css');	              
	              var l = links[links.length-1];
	              l.parentNode.appendChild(ie_css,l);	                    	
	            }
	            else if(agent.indexOf('firefox') != -1){
	            	var FF_css = document.createElement('link');
	            	FF_css.setAttribute('rel','stylesheet');
	            	FF_css.setAttribute('href','styles/firefox.css');
	                var li = links[links.length-1];
	                li.parentNode.appendChild(FF_css,li);  
	            }
	            else if(agent.indexOf('safari') != -1 && agent.indexOf('chrome') == -1){
                    var safari_css = document.createElement('link');
                    safari_css.setAttribute('rel','stylesheet');
                    safari_css.setAttribute('href','styles/safari.css');
                    var sli=document.getElementsByTagName('link')[0];
                    sli.parentNode.appendChild(safari_css,sli);  
                }
			})();
		</script>
		
		<script type="text/javascript">
			UserVoice = window.UserVoice || [];
			var ja = localStorage.fon_lang_code == 'lang.jp';

			///hudmw_lang=lang.jp/.test(document.cookie);
			var _label=ja?"フィードバック":'Feedback';
			var _name= ja?'私達にあなたのフィードバックを与える':'Give us your feedback';
			UserVoice.push(['showTab', 'classic_widget', {
			  mode: 'feedback',
			  primary_color: '#a3a3a3',
			  link_color: '#368c00',
			  forum_id: 209993,
			  feedback_tab_name: _name,
			  tab_label: _label,
			  tab_color: '#368c00',
			  tab_position: 'middle-right',
			  tab_inverted: false
			}]);
		</script>

		<script>
			  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
			console.log("initialize analytics");
			ga('create', 'UA-68784809-1', 'auto');

		</script>


  </head>
  <body data-ng-controller="MainController" flow-prevent-drop>
    <div id="AppLoading" ng-if="!isLoaded">
		<div ng-cloak>
			<div ng-bind="::verbage.loading"></div>
			<img src="img/ajax-loader.gif" />
		</div>
    </div> 
	<div id="login"  ng-if="!token && isLoaded">
		<script type="text/javascript">
			var RecaptchaOptions = {
				theme : 'custom',
				custom_theme_widget: 'recaptcha_widget'
			};
		</script>
		<form method="post" name="login-form" ng-controller="LoginController" novalidate login-submit="login(user)"><!-- /oauth/authentication onsubmit="return validateLoginForm(this);"-->

		  <div style="margin:60px;">
			<div class="big-block">		
				<div class="login-form">
						<div class="section-title">
							Sign In
						</div>
						<label>
							<div class="login-form-label" name="username">
								Username
							</div>
							<div class="login-input-div" ng-class="{'RedText': login-form.username.$invalid && (login-form.username.$dirty  || login.login-form.attempted)}"><input autocomplete="on" autofocus="autofocus" ng-model="user.username" name="username" id="username" type="text" class="login-form-input" maxlength="255" tabindex="1" ng-required="true" ng-focus="resetError($event)"></div>
							<!--[if IE]>
								<script type="text/javascript">
									this.document.getElementById('username').focus();
								</script>
							<![endif]-->							
							<div class="error-message-label-empty" id="usernameEmpty" ng-show="emptyUserLoginField">
								Enter your username
							</div>
						</label>
						<label>
							<div class="login-form-label">
								Password
							</div>
							<div ng-class="{'RedText': login-form.password.$invalid && (login-form.password.$dirty  || login.login-form.attempted)}">
								<input autocomplete="on" ng-model="user.password"  name="password" type="password" class="login-form-input" maxlength="255" tabindex="3" ng-required="true" ng-focus="resetError($event)">
							</div>
							<div ng-show="loginError" class="login-error-message">{{ displayedError }}</div>
							<div class="error-message-label-empty" id="passwordEmpty" ng-show="emptyPWLoginField">
								Enter your password
							</div>
							
						</label>																								
												
						<div class="login-form-submit-area">	
																										
							<label class="login-form-checkbox-label">
								<input type="checkbox" class="login-form-checkbox" name="publicComputer" tabindex="15">						
								<span>
									Public computer
								</span>
							</label>
								
							<div class="login-form-submit-controls">					
								<input type="submit" class="login-form-submit ok" name="signIn" value="Sign In" tabindex="17"> <!-- ng-disabled="!login-form.$valid" -->	
								<a class="a-button" href="" ng-click="resetLogin()"><!-- https://dev4.fon9.com:5501/oauth/authorize?response_type=token&amp;redirect_uri=https%3A%2F%2Fhuc-qa.fonality.com%2Frepository%2Fstable%2F&amp;display=page&amp;client_id=web.hud.fonality.com&amp;assertion=d35985386db614826561e26602702e7eab69cbc4&amp;CANCELED=true&amp;instance_id=6b4c9f7eed547c29ae59e6fce5a15aee3a1bca01a699ef6c -->
									<input type="button" class="login-form-submit cancel" name="cancel" value="Cancel" tabindex="19">
								</a>						
							</div>
						</div>
				
						<div class="login-form-text">				
							<a href=""><!-- http://cp52.fonality.com -->
								Forgot your password?
							</a>
						</div>							
			</div>
					
			<div class="app-info">
				<div class="section-title app-info-content-title">Welcome to Fonality HUD 1.4!</div>
				<div class="app-info-content">
					<div class="app-info-content-row">We are excited to have improved our HUDWeb infrastructure enabling Fonality to deliver more functionality along with an updated user experience in the near future. In addition to the updated infrastructure, we have a made number of small changes that you may or may not notice. If you are interested in learning about these small changes, you can find it <a href="http://help.fonality.com/Release_Notes/HUD_Release_Notes">here</a>.</div>
					<div class="app-info-content-row">Impact to you today:<br>Recent Tab (left column) - will be reset upon first login.</div>
					<div class="app-info-content-row">Happy Holidays and we look forward to bringing you more efficiency and productivity through HUD in 2016!</div>
				</div>
			</div>
		</div>
	  </div>
	</form>
    </div>
    <!-- <script src="common.js"></script>-->    
	<div id="App" ng-if="token && isLoaded">
		<div class="TopBar" include-once="views/TopNavigationBar.html" data-ng-click="onBodyClick()" ng-controller="TopNavigationController" top-nav-behavior></div> <!--  -->

		<div class="PanelWrapper" data-ng-click="onBodyClick()">
			<div class="LeftBar" ng-controller="LeftBarController">
				<div class="RoundedTop"></div>

				<div class="LeftBarWrapper" ng-switch="tab">
					<div class="LeftBarTop">
						<div class="ContactSearch">
							<div ng-show=" tab != 'favorites' && tab != 'recent'">
								<input type="search" ng-model-options="{debounce: 200}" class="SearchBox" ng-attr-placeholder="{{::verbage.search}}" ng-model="query" />
								
								<input type="button" value="{{::verbage.new_word}}" class="New XButton" ng-click="tab == 'groups' ? showOverlay(true, 'GroupEditOverlay') : showOverlay(true, 'ContactEditOverlay')" />
							</div>
							
							<div ng-show="tab == 'favorites'">
								<input type="search" ng-model-options="{debounce: 200}" class="SearchBox Add" ng-attr-placeholder="{{::verbage.add_someone}}" contact-search="all|favorites" ng-controller="ContactsWidget" />
							</div>
						</div>
						<div class="WidgetTabBar">
							<a href="" class="WidgetTabBarButton Ready" ng-click="setTab('all')" ng-class="tab == 'all' ? 'fj-selected-item' : ''">
								<div class="inner {{language}}">{{::verbage.all}}</div>
								<div class="arrow"></div>
							</a>
							<a href="" class="WidgetTabBarButton Ready" ng-click="setTab('favorites')" ng-class="tab == 'favorites' ? 'fj-selected-item' : ''">
								<div class="inner {{language}}">{{::verbage.favorites}}</div>
								<div class="arrow"></div>
							</a>
							<a href="" class="WidgetTabBarButton Ready" ng-click="setTab('recent')" ng-class="tab == 'recent' ? 'fj-selected-item' : ''">
								<div class="inner {{language}}">{{::verbage.recent}}</div>
								<div class="arrow"></div>
							</a>
							<a href="" class="WidgetTabBarButton Ready" ng-click="setTab('external')" ng-class="tab == 'external' ? 'fj-selected-item' : ''">								
								<div class="inner {{language}}">{{::verbage.external}}</div>
								<div class="arrow"></div>
							</a>
							<a href="" class="WidgetTabBarButton Ready" ng-click="setTab('groups')" ng-class="tab == 'groups' ? 'fj-selected-item' : ''">
								<div class="inner {{language}}">{{::verbage.Groups}}</div>
								<div class="arrow"></div>
							</a>
						</div>
					</div>

					<div class="Contacts"
						contact-filters
						include-once="views/ContactsWidget.html"
						ng-controller="ContactsWidget">
					</div>
					<div class="Groups"
						ng-switch-when="groups"
						include-once="views/GroupsWidget.html"
						ng-controller="GroupsController">
					</div>
					<div class="Recent"
						ng-switch-when="recent"
						include-once="views/RecentWidget.html"
						ng-controller="RecentController">
					</div>
				</div>

				<div class="Notifications" include-once="views/Notifications.html" ng-controller="NotificationController"></div>
                
				<div class="Phone">
					<input type="text" class="Number" ng-attr-placeholder="{{::verbage.phone_number}}" ng-model="number" 
						on-submit="makeCall(number)"
					/>
					<input type="button" value="{{::verbage.new_call}}" class="XButton XButtonGreen" ng-click="makeCall(number)"/>
				</div>
			</div>

			<div ng-view class="WidgetPanel"></div>

			<div id="DockPanel" class="DockPanel" include-once="views/DockArea.html" ng-controller="DockController"></div>
		</div>
	</div>

	<div ng-include="currentPopup.url"></div>
	<div ng-include="overlay.url" ng-if="overlay.show"></div>

	<div id="ContextMenu"
		include-once="views/ContextMenu.html"
		ng-controller="ContextMenuController">
	</div>

    <!--bower components-->
    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="bower_components/jquery-ui/jquery-ui.min.js"></script>
    <script src="bower_components/jquery-hoverintent/jquery.hoverIntent.js"></script>
    <script src="bower_components/angular/angular.min.js"></script>
    <script src="bower_components/ng-flow/dist/ng-flow-standalone.min.js"></script>
    <script src="bower_components/angular-sanitize/angular-sanitize.min.js"></script>
    <script src="bower_components/angular-route/angular-route.min.js"></script>
    <script src="bower_components/angulartics/dist/angulartics.min.js"></script>
	<script src="bower_components/angulartics-google-analytics/dist/angulartics-google-analytics.min.js"></script>

	<script src="bower_components/moment/min/moment.min.js"></script>
	<script src="bower_components/moment/locale/ja.js"></script>
  	<script src="properties.js"></script>

	<!-- @if NODE_ENV='development' --> 
	<!--config-->
    <script src="languageMap.js"></script>   
    <script src="scripts/app.js"></script>

    <!--filters-->
    <script src="scripts/filters/highlightTextFilter.js"></script>
    <script src="scripts/filters/durationFilter.js"></script>
    <script src="scripts/filters/dateFilter.js"></script>
    <script src="scripts/filters/chatTextFilter.js"></script>
	<script src="scripts/filters/sortVoiceMailFilter.js"></script>
	<script src="scripts/filters/sortItemsFilter.js"></script>
	
	<!--directives-->
	<script src="scripts/directives/windowResizeDirective.js"></script>
	<script src="scripts/directives/searchDirective.js"></script>
    <script src="scripts/directives/dockableDirective.js"></script>
    <script src="scripts/directives/droppableDirective.js"></script>
    <script src="scripts/directives/dockDraggerDirective.js"></script>
    <script src="scripts/directives/dockResizerDirective.js"></script>
    <script src="scripts/directives/searchContactsDirective.js"></script>
    <script src="scripts/directives/avatarDirective.js"></script>
    <script src="scripts/directives/timeElapsedDirective.js"></script>
    <script src="scripts/directives/includeDirective.js"></script>
    <script src="scripts/directives/expandContractNotificationsDirective.js"></script>
    <script src="scripts/directives/topNavBehaviorDirective.js"></script>
    <script src="scripts/directives/heightChangeDirective.js"></script>
	<script src="scripts/directives/callStatusDirective.js"></script>
    <script src="scripts/directives/onSubmitDirective.js"></script>
    <script src="scripts/directives/contactFiltersDirective.js"></script>
    <script src="scripts/directives/messageScrollDirective.js"></script>
    <script src="scripts/directives/autofocusDirective.js"></script>
    <script src="scripts/directives/loginDirective.js"></script>

    <!--controllers-->   
    <script src="scripts/controllers/MainController.js"></script>
    <script src="scripts/controllers/LoginController.js"></script>
    <script src="scripts/controllers/TopNavigationController.js"></script>
    <script src="scripts/controllers/LeftBarController.js"></script>
    <script src="scripts/controllers/NotificationController.js"></script>
    <script src="scripts/controllers/ContactsWidget.js"></script>
    <script src="scripts/controllers/LocationsController.js"></script>
    <script src="scripts/controllers/ContextMenuController.js"></script>
    <script src="scripts/controllers/CallsRecordingsController.js"></script>

    <script src="scripts/controllers/conversation/ConversationWidgetController.js"></script>
    <script src="scripts/controllers/conversation/ConversationWidgetGroupsController.js"></script>
    <script src="scripts/controllers/conversation/ConversationWidgetQueuesController.js"></script>

    <script src="scripts/controllers/group/GroupsController.js"></script>
    <script src="scripts/controllers/group/GroupSingleController.js"></script>
    <script src="scripts/controllers/group/GroupSingleMembersController.js"></script>
    <script src="scripts/controllers/group/GroupSinglePageController.js"></script>
    <script src="scripts/controllers/group/GroupInfoController.js"></script>

    <script src="scripts/controllers/conference/ConferencesWidgetController.js"></script>
    <script src="scripts/controllers/conference/ConferenceSingleController.js"></script>

    <script src="scripts/controllers/queues/QueueWidgetController.js"></script>
    <script src="scripts/controllers/queues/QueueWidgetAgentsController.js"></script>
    <script src="scripts/controllers/queues/QueueWidgetStatsController.js"></script>
    <script src="scripts/controllers/queues/QueueWidgetCallsController.js"></script>

    <script src="scripts/controllers/callcenter/CallCenterController.js"></script>
    <script src="scripts/controllers/callcenter/CallCenterQueueController.js"></script>
    <script src="scripts/controllers/callcenter/CallCenterMyStatusController.js"></script>
	
	<script src="scripts/controllers/popups/CallStatusOverlayController.js"></script>
	<script src="scripts/controllers/popups/ContactEditOverlayController.js"></script>
	<script src="scripts/controllers/popups/GroupEditOverlayController.js"></script>
	<script src="scripts/controllers/popups/FileShareOverlayController.js"></script>

    <script src="scripts/controllers/MeWidgetController.js"></script>
    <script src="scripts/controllers/VoicemailsController.js"></script>
    <script src="scripts/controllers/CallLogController.js"></script>
    <script src="scripts/controllers/RecordingsController.js"></script>
    <script src="scripts/controllers/SearchWidgetController.js"></script>
    <script src="scripts/controllers/ZoomWidgetController.js"></script>
    <script src="scripts/controllers/IntellinoteController.js"></script>
    <script src="scripts/controllers/ChatController.js"></script>
    <script src="scripts/controllers/DockController.js"></script>
    <script src="scripts/controllers/RecentController.js"></script>

	<!--services-->
    <script src="scripts/services/settingsService.js"></script>
    <script src="scripts/services/httpService.js"></script>
    <script src="scripts/services/groupService.js"></script>
    <script src="scripts/services/contactService.js"></script>
    <script src="scripts/services/chatService.js"></script>
    <script src="scripts/services/storageService.js"></script>
    <script src="scripts/services/queueService.js"></script>
    <script src="scripts/services/conferenceService.js"></script>
    <script src="scripts/services/phoneService.js"></script>
   	<script src="scripts/services/notificationService.js"></script>
    <script src="scripts/services/ntpService.js"></script>
    <script src="scripts/services/detectBrowserService.js"></script>
    
    <!-- factory -->
    <script src="scripts/factory/windowDimensionsFactory.js"></script> 
    <!-- <script src="scripts/factory/webSocketFactory.js"></script>  -->
   	<script src="scripts/services/notificationService.js"></script>
    <!-- @endif -->   
	
	<!-- @if NODE_ENV='production' -->
	<script src="scripts/fjs.min.js?v=<%- version %>"> </script>
	<!-- @endif --> 
    

</body>
</html>
