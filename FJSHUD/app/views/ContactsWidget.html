<div class="Widget Contacts" id="WidgetContacts">
    <div class="WidgetHeader" unpin="/contacts" draggable="true">
        <div class="Avatar AvatarApp">
            <div class="TopBarItemAppIcon Contacts"></div>
        </div>
        <div class="WidgetHeaderTitle" >Contacts</div>
    </div>
    <div class="WidgetBody">
        <div class="WidgetTabBar">
            <a href="#/contacts" class="WidgetTabBarButton Ready" ng-class="!external ? 'fj-selected-item' : ''">
                <div class="inner">Contacts</div>
                <div class="arrow"></div>
            </a>
            <a href="#/contacts/groups" class="WidgetTabBarButton Ready">
                <div class="inner">Groups</div>
                <div class="arrow"></div>
            </a>
            <a href="#/contacts/external" class="WidgetTabBarButton Ready" ng-class="external ? 'fj-selected-item' : ''">
                <div class="inner">External</div>
                <div class="arrow"></div>
            </a>
        </div>
    <div class="ToolBar">
        <div class="SearchInputBox">
            <div class="SearchInputBoxInputHolder">
                <input class="SearchInputBoxInput" data-ng-change="onSearch()" type="text" x-webkit-speech="" data-ng-model="query" placeholder="Search">
            </div>
            <div class="SearchInputBoxStateButton">
                <div class="SearchInputBoxStateButtonIcon"></div>
            </div>
        </div>
        <button class="XButton XButtonNormal" data-ng-click="showOverlay()">New
        </button>
    </div>
    <div class="ListLineContent Header LeftContactsColumns">
        <div class="ListLineContentCell" >
            Sort:
        </div>
		<!--
        <div data-ng-click="sort('displayName')" class="ListLineContentCell Name {{(sortField == 'displayName' && ((sortReverce && 'Down') || 'Up')) || 'None'}}">
            <span>NAME</span>
            <div class="DirectionArrow"></div>
        </div>
        <div data-ng-click="sort('primaryExtension')" class="ListLineContentCell Extension {{(sortField == 'primaryExtension' && ((sortReverce && 'Down') || 'Up')) || 'None'}}">
            <span>EXTENSION</span>
            <div class="DirectionArrow"></div>
        </div>
		-->
        <div data-ng-click="sort('timestamp')" class="ListLineContentCell Recent {{(sortField == 'timestamp' && ((sortReverce && 'Down') || 'Up')) || 'None'}}">
            <span>RECENT</span>
            <div class="DirectionArrow"></div>
        </div>
        <div data-ng-click="sort('calls_startedAt')"  class="ListLineContentCell CallStatus {{(sortField == 'calls_startedAt' && ((sortReverce && 'Down') || 'Up')) || 'None'}}">
            <span>CALL STATUS</span>
            <div class="DirectionArrow"></div>
        </div>
        <div data-ng-click="sort('contactstatus_xmpp')"  class="ListLineContentCell HudStatus {{(sortField == 'contactstatus_xmpp' && ((sortReverce && 'Down') || 'Up')) || 'None'}}">
            <span>HUD STATUS</span>
            <div class="DirectionArrow"></div>
        </div>
    </div>
    
    <!--<div id="ContactsList" contacts-list></div>-->
		
	<div class="LeftBarTabContentList">
        <a href="" context-menu="contact" data-ng-repeat="contact in contacts | ContactsWithoutMe | filter:filterContactFn(query) | filter:filterIsExternal() | orderBy:sortField:sortReverce track by contact.xpid" class="ListRowFirst ListRow ListRow-Contact" ng-click="loadPanel(contact)">
            <div class="Avatar AvatarNormal" avatar-menu="contact">
                <img class="AvatarImgPH" data-ng-src="{{::contact.getAvatarUrl(28,28)}}">
                <div class="AvatarForeground AvatarInteractable"></div>
				<div ng-show="contact.events > 0" class="EventsBaloon">{{ contact.events }}</div>
            </div>
            <div class="ListRowContent">
                <div class="ListRowTitle">
                    <div class="name">
                        <b>{{ ::contact.getDisplayName() }}</b>
                        <span class="details">#{{ ::contact.primaryExtension }}</span>
                    </div>
                </div>
                <!--<div class="CallStatus">
                    <div class="Avatar AvatarSmall CallAvatar CallAvatar_Office">
                        <img class="AvatarImgPH" data-fj-local-id="avatarImg" ng-src="{{ contact.getCallAvatarUrl(28,28)}}">
                        <div class="AvatarInteractable AvatarForeground"></div>
                    </div>
                </div>-->
                <div class="ListRowStatus">
                    <div class="ListRowStatusIcon XIcon-ChatStatus-{{contact.getChatStatus()}}">
                        <div class="status-icon-inner"></div>
                    </div>
                    <div class="ListRowStatusIcon XIcon-QueueStatus XIcon-QueueStatus-{{contact.contactstatus_queueStatus}}">
                        <div class="status-icon-inner"></div>
                    </div>
                    <div class="ListRowStatusText">{{contact.contactstatus_xmppCustom || contact.contactstatus_xmpp || 'offline'}}</div>
                </div>
            </div>
        </a>
    </div>

    </div>
</div>

<div ng-show="overlay" class="Overlay">
	<div ng-click="overlay = false" class="Background"></div>
	<div class="Foreground">
		<div ng-click="overlay = false" class="Close">x</div>
		
		<div class="Header">
			<h2>Add a New Contact</h2>
		</div>
		
		<div class="Sections">
			<div class="Section">
				<div>
					<h4>Contact Information</h4>
					<em>Want to know who is calling you?</em>
				</div>
				<div>
					<label>First Name</label>
					<input ng-model="add.firstName" type="text" class="XInputText" />
				</div>
				<div>
					<label>Last Name</label>
					<input ng-model="add.lastName" type="text" class="XInputText" />
				</div>
				<div>
					<label>Display Name</label>
					<input ng-model="add.displayName" type="text" class="XInputText" />
				</div>
				<div>
					<h4>Visibility</h4>
					<input ng-model="add.favorite" type="checkbox" /> Add to favorites group
				</div>
			</div>
			
			<div class="Section">
				<div>
					<h4>Phones</h4>
					<em>Add contact phone to make calls</em>
				</div>
				<div>
					<label>Business phone</label>
					<input ng-model="add.business" type="text" class="XInputText" />
				</div>
				<div>
					<label>Mobile phone</label>
					<input ng-model="add.mobile" type="text" class="XInputText" />
				</div>
				<div>
					<h4>Messaging</h4>
					<em>Want to chat and e-mail this person?</em>
				</div>
				<div>
					<label>E-mail</label>
					<input ng-model="add.email" type="text" class="XInputText" />
				</div>
				<div>
					<label>GoogleTalk (JID)</label>
					<input ng-model="add.jid" type="text" class="XInputText" />
				</div>
				<div>
					<label>IMS</label>
					<input ng-model="add.ims" type="text" class="XInputText" />
				</div>
			</div>
		</div>
		
		<div class="Footer">
			<input type="button" class="XButton" value="Cancel" ng-click="overlay = false" />
			<input type="button" class="XButton" value="Add Contact" ng-click="addContact()" />
		</div>
	</div>
</div>