<div class="LeftBarNotificationSection">
	<div class="TitleBar ">
		<div class="Icon"></div>
		<div>Notifications  </div>
		<div class="Event" ng-show="notifications.length > 0 " > {{ notifications.length + ' events' }} </div>
		<input type="button" value="Open" class="XButton" ng-click="$parent.overlay ='notifications'" />
	</div>
	
	<div class="NotificationMessages LeftBarNotifications">
		<!--<react-component name="notification" props='notifications'/>-->
			
			<div class="Messages" ng-repeat="message in todaysNotifications">
					
					<div class="NotificationHeader"> 
							<div class="NotificationHeaderBackground"> 
								<div class="NotificationClose" ng-click="remove_notification(message.xpid)"></div>
							</div>
							
					</div>
					<div class="NotificationDivider"><img /></div>
					<div class="NotificationSection"> 
						
						<div class="LeftBarNotificationAvatarSection " ng-click="go_to_notification_chat(message.senderId,message.xpid)"> 
							<img class="NotificationAvatar CallAvatar "  
								ng-class="message.audience == 'queue' ? 'CallAvatar_Queue' : 'CallAvatar_External'"
								ng-src="{{getAvatar(message.senderId)}}" onerror="this.src='img/Generic-Avatar-28.png'"/>
						</div>
					
						<div class="LeftBarNotificationMessageSection" > 
							<div ng-click="go_to_notification_chat(message.senderId,message.xpid)">
								<div class="" ng-class="message.audience == 'queue' ? 'NotificationDisplayNameQueue' : 'NotificationDisplayName'" >{{ message.displayName}} <div class="NotificationTime">{{  convertTime(message.time) }} </div></div> 
								<div class="NotificationType">...{{ message.type }}</div>
								<div class="NotificationMessage">{{ getMessage(message) }} </div>
							</div>
							<div class="NotificationZoomBtn" ng-if="message.type == 'zoom'">
								<span class="XButton XButtonRed"> Reject</span>
								<span class="XButton XButtonGreen" ng-click="acceptCall(message.senderId)">Accept</span>
							
							</div>
							<div class="NotificationZoomBtn" ng-if="message.type == 'vm'">
								<span class="XButton" style="width:70px" ng-click="playVm(message.vmId)"> Play</span>
								<span class="XButton XButtonGreen" style="width:90px" ng-click="makeCall(message.phone)">Call Back</span>
							</div>

							<div class="NotificationZoomBtn" ng-if="message.type == 'missed-call'">
								<span class="XButton" style="width:70px"  ng-click="go_to_notification_chat(message.senderId,message.xpid)">Chat</span>
								<span class="XButton XButtonGreen" style="width:70px" ng-click="makeCall(message.phone)">Call</span>	
							</div>
							<a href="#/queue/{{message.queueId}}" class="NotificationZoomBtn" ng-if="message.audience=='queue'">
								<span class="XButton" style="width:70px" >Show</span>
							</a>
						</div>
				</div>

			</div>
	</div>
</div>

<div ng-show="$parent.overlay == 'notifications'" class="Overlay">
	<div ng-click="showOverlay(false)" class="Background"></div>
	<div class="Foreground">
		<div ng-click="showOverlay(false)" class="Close">x</div>
		
		<div class="Header NotificationSectionHeader">
			<div class="NotificationSectionHeaderImage"></div>
			<div class="NotificationHeaderTitle"> <h2>  Notifications </h2> </div>
			<div class="NotificationHeaderTitle"> <h2>  New: {{get_new_notifications().length}} </h2> </div>
			<div class="NotificationHeaderTitle"> <h2>  Away: {{ get_away_notifications().length}}</h2> </div>
			<div class="NotificationHeaderTitle"> <h2>  Old:  {{ get_old_notifications().length}}</h2> </div>
		
		</div>
		
		<div class="Sections NotificationMessages" >
			<div>
				<div class="Messages" ng-repeat="message in notifications">
					
					<div class="NotificationHeader"> 
							<div class="NotificationHeaderBackground"> 
								<div class="NotificationClose" ng-click="remove_notification(message.xpid)"></div>
							</div>
							
					</div>
					<div class="NotificationDivider"><img /></div>
					<div class="NotificationSection"> 
						
						<div class="LeftBarNotificationAvatarSection" ng-click="go_to_notification_chat(message.senderId,message.xpid)"> 
							<img class="NotificationAvatar CallAvatar"ng-class="message.audience == 'queue' ? 'CallAvatar_Queue' : 'CallAvatar_External'" 

							ng-src="{{getAvatar(message.senderId)}}" onerror="this.src='img/Generic-Avatar-28.png'"/>
						</div>
					
						<div class="LeftBarNotificationMessageSection"> 
							
							<div class="NotificationDisplayName" ng-click="go_to_notification_chat(message.senderId)">{{ message.displayName}} <div class="NotificationTime">{{  convertTime(message.time) }} </div></div> 
							<div class="NotificationType">...{{ message.type }}</div>
							<div class="NotificationMessage"><p>{{ getMessage(message) }} </p> </div>
							<div class="NotificationZoomBtn" ng-if="message.type == 'zoom'">
								<span class="XButton XButtonRed" style="width:70px" > Reject</span>
								<span class="XButton XButtonGreen" style="width:70px"  ng-click="acceptCall(message.senderId)" >Accept</a>
							</div>
							<div class="NotificationZoomBtn" ng-if="message.type == 'vm'">
								<span class="XButton" style="width:70px" > Play</span>
								<span class="XButton XButtonGreen" style="width:90px" ng-click="makeCall(message.phone)" >Call Back</span>
							</div>

							<div class="NotificationZoomBtn" ng-if="message.type == 'missed-call'">
								<span class="XButton" style="width:70px"  ng-click="go_to_notification_chat(message.senderId,message.xpid)">Chat</span>
								<span class="XButton XButtonGreen" style="width:70px" ng-click="makeCall(message.phone)">Call</span>
							</div>
							<div class="NotificationZoomBtn" ng-if="message.audience == 'queue'">
								<span class="XButton" style="width:70px" >Show</span>
							</div>
							

						</div>
				</div>

				</div>
			</div>
		</div>
		
		<div class="Footer">
			<div class="Error" ng-show="addError" ng-bind="addError"></div>
			<input type="button" class="XButton" value="Cancel" ng-click="showOverlay(false)" />
			<input type="button" class="XButton XButtonRed" value="Clear All" ng-click="remove_all()" />
		</div>
	</div>

</div>


<div ng-repeat="currentCall in calls" ng-class="currentCall.incoming ? 'CallStatusContainerInbound' : 'CallStatusContainerOutbound' " ng-if="inCall">
		<div ng-click="showCurrentCallControls(currentCall)" class="CallStatusIconContainer">
			<div class="CallStatusIcon"> </div>
		</div>
		<div ng-click="showCurrentCallControls(currentCall)" style="display:inline-block" class="CallStatusText"> 
			<div style="font-weight:bold;font-size:14px">{{currentCall.displayName}}</div>
			<div><div>{{ currentCall.incoming ? 'inbound' : 'outbound'}} on call</div></div>
		</div>
		
		<div style="float:right;display:inline-block;margin-top:5px">
			<div ng-click="endCall(currentCall.xpid)" ng-if="isRinging" class="XButton">Cancel</div>
			<div ng-click="holdCall(currentCall.xpid,true)" ng-if="!isRinging && !onHold" class="XButton">Hold</div>
			<div ng-click="endCall(currentCall.xpid)" class="XButton" ng-if="!isRinging && !onHold">End</div>
			<div ng-click=" holdCall(currentCall.xpid,false)" class="XButton" ng-if="onHold">Talk</div>
			<div ng-click="acceptCall(currentCall.xpid)" ng-if="currentCall.incoming && isRinging" class="XButton">Accept</div>
		</div>
		
</div>
<div id="CallAlert" ng-include="'views/nativealerts/CallAlert.html'"></div>


