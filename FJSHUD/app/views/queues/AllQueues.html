<div class="ToolBar Queues">
	<input class="SearchBox" type="search"
        ng-model="query"
        x-webkit-speech=""
        ng-attr-placeholder="{{::verbage.search}}" 
		ng-model-options="{debounce: 100}"
        />
		
  <div class="XButton QueueButtonToggle XButtonNormal" ng-click="viewIcon = !viewIcon">
    <div class="QueueViewIcon" ng-class="viewIcon ? 'QueueListView' : 'QueueTileView'"></div>
  </div>
    <select ng-if="viewIcon" class="XButton XButtonNormal XButtonDropDown XSortButton"
			ng-model="selectedQueue"
            ng-options="queue_option.display_name for queue_option in queue_options track by queue_option.display_name" 
			ng-change="setSort(selectedQueue.type, selectedQueue)">
    </select>

</div>

<div class="ListViewTopSpace"></div>

<div ng-if="viewIcon" class="QueueList">
	<div class="Block" ng-repeat="queue in queues | filter: query | orderBy: sortColumn: isAscending track by queue.xpid" dockable="queue">
		<a href="#/queue/{{::queue.xpid}}" ng-click="storeRecentQueue(queue.xpid)" class="Header">
			<div class="Avatar AvatarNormal" context-menu="queue">
				<div class="GroupAvatarItem GroupAvatarItem_0">
					<img class="GroupAvatarItemImg" data-ng-src="{{ ::queue.getAvatar(0, 28) }}" onerror="this.src='img/Generic-Avatar-28.png'" />
				</div>
				<div class="GroupAvatarItem GroupAvatarItem_1">
					<img class="GroupAvatarItemImg" data-ng-src="{{ ::queue.getAvatar(1, 28) }}" onerror="this.src='img/Generic-Avatar-28.png'" />
				</div>
				<div class="GroupAvatarItem GroupAvatarItem_2">
					<img class="GroupAvatarItemImg" data-ng-src="{{ ::queue.getAvatar(2, 28) }}" onerror="this.src='img/Generic-Avatar-28.png'" />
				</div>
				<div class="GroupAvatarItem GroupAvatarItem_3">
					<img class="GroupAvatarItemImg" data-ng-src="{{ ::queue.getAvatar(3, 28) }}" onerror="this.src='img/Generic-Avatar-28.png'" />
				</div>
				<div class="AvatarInteractable"></div>
			</div>
			<div class="Title">
				<div class="Name">{{ ::queue.name }}</div>
				<div class="Agents">{{::verbage.agents}}: {{ queue.info.active + ' / ' + queue.loggedInMembers + ' / ' + queue.members.length }}</div>
			</div>
		</a>
		
		<div class="Stats">
			<div ng-class="(queue.info.waiting > queueThresholds.waiting && queueThresholds.waiting != 0) ? 'RedText' : ''">
				<strong>{{ queue.info.waiting }}</strong>
				{{::verbage.waiting}}
			</div>
			<div ng-class="(queue.info.esa > queueThresholds.avg_wait && queueThresholds.avg_wait != 0) ? 'RedText' : ''">
				<strong>{{ queue.info.esa*1000 | duration }}</strong>
				{{::verbage.avg_wait}}
			</div>
			<div ng-class="(queue.info.avgTalk > queueThresholds.avg_wait && queueThresholds.avg_wait != 0) ? 'RedText' : ''">
				<strong>{{ queue.info.avgTalk*1000 | duration }}</strong>
				{{::verbage.avg_talk}}
			</div>
			<div >
				<strong>{{ queue.info.abandon + queue.info.completed }}</strong>
				{{::verbage.talk}}
			</div>
			<div ng-class="(queue.info.abandonPercent > queueThresholds.abandoned && queueThresholds.abandoned != 0) ? 'RedText' : ''">
				<strong>{{ queue.info.abandonPercent }}%</strong>
				{{::verbage.aban}}
			</div>
			<div>
				<strong>{{ queue.info.active }}</strong>
				{{::verbage.active}}
			</div>
		</div>
	</div>
</div>

<div ng-if="!viewIcon" class="QueueList">
	<div class="Grid">
		<div class="Header">
			<div ng-click="setSort('name')">
				<span>{{::verbage.queue_name}}</span>
				<div ng-if="sortColumn == 'name'" ng-class="isAscending ? 'desc_arrow' : 'asc_arrow'"></div>
			</div>
			<div ng-click="setSort('info.waiting')">
				<span>{{::verbage.waiting}}</span>		
				<div ng-if="sortColumn == 'info.waiting'" ng-class="isAscending ? 'asc_arrow' : 'desc_arrow'"></div>
			</div>
			<div ng-click="setSort('info.esa')">
				<span>{{::verbage.avg_wait}}</span>		
				<div ng-if="sortColumn == 'info.esa'" ng-class="isAscending ? 'asc_arrow' : 'desc_arrow'"></div>
			</div>
			<div ng-click="setSort('info.avgTalk')">
				<span>{{::verbage.avg_talk}}</span>		
				<div ng-if="sortColumn == 'info.avgTalk'" ng-class="isAscending ? 'asc_arrow' : 'desc_arrow'"></div>
			</div>
			<div ng-click="setSort('info.abandon + info.completed')">
				<span>{{::verbage.total}}</span>		
				<div ng-if="sortColumn == 'info.abandon + info.completed'" ng-class="isAscending ? 'asc_arrow' : 'desc_arrow'"></div>
			</div>
			<div ng-click="setSort('info.abandonPercent')">
				<span>{{::verbage.abandoned}}</span>		
				<div ng-if="sortColumn == 'info.abandonPercent'" ng-class="isAscending ? 'asc_arrow' : 'desc_arrow'"></div>
			</div>
			<div ng-click="setSort('info.active')">
				<span>{{::verbage.active}}</span>		
				<div ng-if="sortColumn == 'info.active'" ng-class="isAscending ? 'asc_arrow' : 'desc_arrow'"></div>
			</div>
		</div>
		<div class="Table">
			<a href="#queue/{{::queue.xpid}}" ng-click="storeRecentQueue(queue.xpid)" class="Row" ng-repeat="queue in queues | filter: query | orderBy: sortColumn: isAscending track by queue.xpid" dockable="queue">
                <div>{{ ::queue.name }}</div>
				<div>{{ queue.info.waiting}}</div>
				<div>{{ queue.info.esa*1000 | duration}}</div>
				<div>{{ queue.info.avgTalk*1000 | duration}}</div>
				<div>{{ queue.info.abandon + queue.info.completed }}</div>
				<div>{{ queue.info.abandonPercent }}%</div>
				<div>{{ queue.info.active }}</div>
			</a>
		</div>
	</div>
</div>

<div class="ToolBarBottom" ng-show="selected == 'allqueues'">
  <input type="button" class="XButton" value="Reset All Stats" ng-click="resetStats()"  />
</div>


