<div class="ToolBar">
	<input type="search" class="SearchBox" ng-model="query" placeholder="{{::verbage.search}}" 
	ng-model-options="{debounce: 100}"/>
</div>

<div class="QueueList CallList">
	<div class="Header">
		<div class="ListSectionHeaderTitle">{{::verbage.in_queue}}</div>
		<em ng-if="callsWaiting.length > 0">
			{{ callsWaiting.length }} {{::verbage.calls_in_queue_longest_wait}}
			<span timer="longestWait"></span>
		</em>
		
		<div class="Arrow" ng-class="showWaiting ? 'On' : 'Off'" ng-click="showWaiting = !showWaiting"></div>
	</div>
	
	<div ng-if="showWaiting">
		<div class="Empty" ng-if="callsWaiting.length == 0">
			{{::verbage.nobody_is_waiting}}
		</div>
	  
		<div ng-repeat="call in callsWaiting | filter: {displayName: query}">
			<div class="ActiveCall">
				<div class="Info">
					<div class="Arrow" ng-if="call.agent"></div>
					<div class="Avatar CallAvatar CallAvatar_Queue">
						<img class="AvatarImgPH" src="img/Generic-Avatar-28.png" />
					</div>
					<div class="Name">{{ call.displayName + ' (' + call.phone + ')' }}</div>
					<div class="Time" timer="call.startedAt"></div>
				</div>
							
				<div class="Agent" ng-if="call.agent">
					<div class="Avatar AvatarNormal" context-menu="call.agent">
						<img class="AvatarImgPH" data-ng-src="{{::call.agent.getAvatar(28)}}" onerror="this.src='img/Generic-Avatar-28.png'" />
						<div class="AvatarForeground AvatarInteractable"></div>
					</div>
					<div>{{ call.agent.displayName }}</div>
				</div>
			</div>
		</div>
	</div>

	<div class="Header">
		<div class="ListSectionHeaderTitle">{{::verbage.active_calls_answered}}</div>
		<em ng-if="callsActive.length > 0">
			{{ callsActive.length }} {{::verbage.active_calls_in_queue_longest_wait}}
			<span timer="longestActive"></span>
		</em>
		
		<div class="Arrow" ng-class="showActive ? 'On' : 'Off'" ng-click="showActive = !showActive"></div>
	</div>
  
	<div ng-if="showActive">
		<div class="Empty" ng-if="callsActive.length == 0">
			{{::verbage.no_active_calls}}
		</div>
	  
		<div ng-repeat="call in callsActive | filter: {agent: {displayName: query}}">
			<div class="ActiveCall">
				<div class="Info">
					<div class="Arrow"></div>
					<div class="Avatar CallAvatar CallAvatar_Queue">
						<img class="AvatarImgPH" src="img/Generic-Avatar-28.png" />
					</div>
					<div class="Name">{{ call.displayName + ' (' + call.phone + ')' }}</div>
					<div class="Time" timer="call.startedAt"></div>
				</div>
							
				<div class="Agent">
					<div class="Avatar AvatarNormal" context-menu="call.agent">
						<img class="AvatarImgPH" data-ng-src="{{::call.agent.getAvatar(28)}}" onerror="this.src='img/Generic-Avatar-28.png'" />
						<div class="AvatarForeground AvatarInteractable"></div>
					</div>
					<div>{{ call.agent.displayName }}</div>
				</div>
			</div>
		</div>
	</div>
</div>

