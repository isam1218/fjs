<div class="Widget Conversation" unpin="{{'#/contact/'+contact.xpid+'/voicemails'}}" draggable="true">
    <div class="WidgetHeader" context-menu="contact">
        <div class="Avatar AvatarNormal" avatar-menu="contact"> <!-- on click - open avatar menu-->
            <img onerror="this.src='img/Generic-Avatar-Small.png'" class="AvatarImgPH"
                 data-ng-src="{{contact.getAvatarUrl(32,32);}}">

            <div class="AvatarForeground AvatarInteractable"></div>
        </div>
        <div class="WidgetHeaderTitle" data-ng-if="!contact.isExternal()">{{contact.getDisplayName()}}
            ({{contact.primaryExtension}})
        </div>
        <div class="WidgetHeaderTitle" data-ng-if="contact.isExternal()">{{contact.getDisplayName()}}</div>
        <div class="WidgetHeaderStatus WithIcons">
            <div title="contact.queueStatusTitle" class="WidgetHeaderStatusItem Icon XIcon-QueueStatus"
                 data-ng-class="contact.getQueueStatus()"></div>
            <div class="WidgetHeaderStatusItem Icon XIcon-ChatStatus-{{contact.getChatStatus()}}"></div>
            <div class="WidgetHeaderStatusItem ChatStatus">{{contact.getCustomXmppStatus()}}</div>
        </div>
        <div class="WidgetHeaderInfo">
            <div class="WidgetHeaderInfoRow">
                <label>Email:</label><a ng-href="{{'mailto://'+contact.email}}">{{contact.email}}</a>
            </div>
            <div class="WidgetHeaderInfoRow">
                <label>Ext:</label><a href="javascript:" ng-click="callPhone(contact.primaryExtension)">{{contact.primaryExtension}}</a>
            </div>
            <div class="WidgetHeaderInfoRow">
                <label>Phone:</label><a href="javascript:" ng-click="callPhone(contact.phoneBusiness)">{{contact.phoneBusiness}}</a>
            </div>
            <div class="WidgetHeaderInfoRow">
                <label>Mobile:</label><a href="javascript:" ng-click="callPhone(contact.phoneMobile)">{{contact.phoneMobile}}</a>
            </div>
        </div>
        <div class="WidgetHeaderCallStatus" ng-class="{'HasCall':contact.hasCall()}">
            <div ng-if="contact.hasCall()">
                <div ng-class="'CallAvatar_'+contact.getCallType()" class="Avatar AvatarSmall CallAvatar">
                    <img class="AvatarImgPH" data-ng-src="{{contact.getCallAvatarUrl(28, 28)}}"/>

                    <div class="AvatarForeground AvatarInteractable"></div>
                </div>
                <div class="CallLineTop">
                    <div class="CallerName">{{contact.calls_displayName}}</div>
                    <div class="CallDuration">{{duration}}</div>
                </div>
            </div>
            <div class="CallerPhone"></div>
            <div ng-if="!contact.hasCall()">
                <div class="NoCallText">No active call</div>
                <div class="NoCallIcon"></div>
            </div>
        </div>
    </div>
    <div class="WidgetBody">
        <div class="WidgetTabBar">
            <!--<a href="#/contact/{{contactId}}" class="WidgetTabBarButton Ready ">-->
            <a href="" ng-click="switchTab(contactId, 'chat')" class="WidgetTabBarButton Ready ">
                <div class="inner">Chat</div>
                <div class="arrow"></div>
            </a>
            <!--<a href="#/contact/{{contactId}}/voicemails" class="WidgetTabBarButton Ready fj-selected-item">-->
            <a href="" class="WidgetTabBarButton Ready fj-selected-item">
                <div class="inner">Voicemails</div>
                <div class="arrow"></div>
            </a>
            <!--<a href="#/contact/{{contactId}}/groups" class="WidgetTabBarButton Ready ">-->
            <a href="" ng-click="switchTab(contactId, 'groups')" class="WidgetTabBarButton Ready ">
                <div class="inner">Groups</div>
                <div class="arrow"></div>
            </a>
            <!--<a href="#/contact/{{contactId}}/calllog" class="WidgetTabBarButton Ready">-->
            <a href="" ng-click="switchTab(contactId, 'calllog')" class="WidgetTabBarButton Ready">
                <div class="inner">Call Log</div>
                <div class="arrow"></div>
            </a>
        </div>


        <div class="fj-content WidgetTabContent">
            <div class="ToolBar">
                <div class="SearchInputBox">
                    <div class="SearchInputBoxInputHolder">
                        <input class="SearchInputBoxInput" type="text" x-webkit-speech="" placeholder="Search">
                    </div>
                    <div class="SearchInputBoxStateButton">
                        <div class="SearchInputBoxStateButtonIcon"></div>
                    </div>
                </div>
                <div class="XButton XButtonNormal XButtonDropDown XSortButton">
                    <span>Sort by Newest First</span>

                    <div class="XButtonDropDownArrow"></div>
                </div>
                <div class="XButton XButtonNormal XButtonDropDown disabled-false">
                    <span>Actions</span>

                    <div class="XButtonDropDownArrow"></div>
                </div>
            </div>
            <div class="fj-scrollable ListView WithToolBar">
                    <div class="InlineList">
                        <div class="fj-scroll-content">
                            <div ng-repeat="voicemail in voicemails | ContactVoicemailsFilter : contact.xpid" class="fj-hbox ListMessage Read-true Voicemail">
                                <div class="fj-hbox-cell ListMessageLeft">
                                    <div class="Avatar CallAvatar CallAvatar_Office">
                                        <img class="AvatarImgPH"
                                            src="{{voicemail.getContact().getAvatarUrl(40,40)}}">
                                        <div class="AvatarInteractable AvatarForeground"></div>
                                    </div>
                                </div>
                                <div class="fj-hbox-space ListMessageContent ClickArea" >
                                    <div class="fj-hbox ListMessageHeader">
                                        <div class="fj-hbox-cell ListMessageHeaderPrefix" ng-if="voicemail.isFromMe()">
                                            ME&nbsp;<span>...to</span></div>
                                        <div class="fj-hbox-cell ListMessageHeaderPrefix" ng-if="!voicemail.isFromMe()"><span>...from</span>
                                        </div>
                                        <div class="fj-hbox-space name ListMessageHeaderName">
                                            <span>{{voicemail.getContact().getDisplayName()}}</span><span>{{voicemail.getFormatedContactPhone()}}</span></div>
                                        <div class="fj-hbox-cell MessageDate time">{{voicemail.getDate()}}</div>
                                    </div>
                                    <div class="ListMessageText" ><span
                                            class="ListMessageDuration">{{voicemail.getDuration()}}</span><span
                                            class="Transcription-{{voicemail.getTranscriptionStatus()}}">{{voicemail.getTranscription()}}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
            </div>
        </div>
    </div>
</div>