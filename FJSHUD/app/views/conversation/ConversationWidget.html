<div class="Widget Conversation">
    <div class="WidgetHeader">
        <div class="Avatar AvatarNormal">
            <img onerror="this.src='img/Generic-Avatar-Small.png'" class="AvatarImgPH"
                 data-ng-src="{{contact.getAvatar(32)}}">
            <div class="AvatarForeground AvatarInteractable"></div>
        </div>
        <div class="WidgetHeaderTitle">
			{{contact.displayName}} 
			<span ng-if="contact.primaryExtension">({{contact.primaryExtension}})</span>
			<br/>
            <div class="XIcon-QueueStatus" data-ng-class="contact.getQueueStatus()"></div>
            <div class="XIcon-ChatStatus-{{contact.hud_status || 'offline'}}"></div>
            <span class="ChatStatus">{{ contact.hud_status ? (contact.hud_status == 'dnd' ? 'busy' : contact.hud_status) : 'offline' }}</span>
		</div>
        <div class="WidgetHeaderCallStatus">
            <div ng-if="contact.hasCall()">
                <div ng-class="'CallAvatar_'+contact.getCallType()" class="Avatar AvatarSmall CallAvatar">
                    <img class="AvatarImgPH" data-ng-src="{{contact.getCallAvatarUrl(28, 28)}}" />
                    <div class="AvatarForeground AvatarInteractable"></div>
                </div>
                <div class="CallLineTop">
                    <div class="CallerName">{{contact.calls_displayName}}</div>
                    <div class="CallDuration">{{duration}}</div>
                </div>
            </div>
            <div class="CallerPhone"></div>
            <div ng-if="!contact.hasCall()">
                <div class="NoCallIcon"></div>
                <div class="NoCallText">No active call</div>
            </div>
        </div>
    </div>
    <div class="WidgetBody">
        <div class="WidgetTabBar">
			<a href="" ng-repeat="tab in tabs" ng-click="$parent.selected = tab" class="WidgetTabBarButton Ready" ng-class="selected == tab ? 'fj-selected-item' : ''">
				<div class="inner">{{ ::tab }}</div>
				<div class="arrow"></div>
			</a>
        </div>
		
		<!-- ng-views -->
        <div ng-if="selected == 'Chat'" class="ListView ChatView WithToolBar" ng-include="'views/ChatView.html'" 
        ng-controller="ChatController"></div>
        
        <div ng-if="selected == 'Voicemails'" class="voicemail fj-content WidgetTabContent" ng-include="'views/Voicemails.html'"
        ng-controller="VoicemailsController" 
        ></div>
        
        <div ng-if="selected == 'Groups'" class="fj-content WidgetTabContent" ng-include="'views/conversation/ConversationGroups.html'"
        ng-controller="ConversationWidgetGroupsController"
        ></div>
        
        <div ng-if="selected == 'Queues'" class="fj-content WidgetTabContent" ng-include="'views/conversation/ConversationQueues.html'"
        ng-controller="ConversationWidgetQueuesController"
        ></div>

        <div ng-if="selected == 'Call Log'" class="fj-content WidgetTabContent" ng-include="'views/conversation/ConversationCallLog.html'"
        ng-controller="ConversationWidgetCallLogController"
        ></div>
	</div>
</div>