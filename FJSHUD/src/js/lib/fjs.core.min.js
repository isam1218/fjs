'use strict';Function.prototype.extend=function(a){var b=new Function;b.prototype=a.prototype;this.prototype=new b;this.prototype.constructor=this;this.prototype.superClass=a.prototype;for(b=1;b<arguments.length;++b){var c=arguments[b],d;for(d in c.prototype)this.prototype[d]||(this.prototype[d]=c.prototype[d]);this.prototype[c.prototype.__class_name]=c.prototype}};var namespace=function(a){for(var a=a.split("."),b=self[a[0]]=self[a[0]]||{},c=1;c<a.length;c++)var d=a[c],b=b[d]=b[d]||{};return b};
namespace("fjs.utils");fjs.utils.Array=function(){};fjs.utils.Array.isArray=function(a){return Array.isArray(a)||"object"===typeof a&&"[object Array]"===a+""};
(function(){function a(){if(null==b){var a=-1,c,d;"Microsoft Internet Explorer"==navigator.appName?(c=navigator.userAgent,d=/MSIE ([0-9]{1,}[.0-9]{0,})/,null!=d.exec(c)&&(a=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(c=navigator.userAgent,d=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/,null!=d.exec(c)&&(a=parseFloat(RegExp.$1)));return b=a}return b}namespace("fjs.utils");var b=null;fjs.utils.Browser=function(){};fjs.utils.Browser.getIEVersion=a;var c=fjs.utils.Browser,d;d=-1!=a()?function(){return!0}:
function(){return!1};c.isIE=d;c=fjs.utils.Browser;d=7==a()?function(){return!0}:function(){return!1};c.isIE7=d;c=fjs.utils.Browser;d=8==a()?function(){return!0}:function(){return!1};c.isIE8=d;c=fjs.utils.Browser;d=9==a()?function(){return!0}:function(){return!1};c.isIE9=d;c=fjs.utils.Browser;d=10==a()?function(){return!0}:function(){return!1};c.isIE10=d;c=fjs.utils.Browser;d=11==a()?function(){return!0}:function(){return!1};c.isIE11=d;c=fjs.utils.Browser;d=/chrom(e|ium)/i.test(navigator.userAgent)?
function(){return!0}:function(){return!1};c.isChrome=d;c=fjs.utils.Browser;d=/firefox/i.test(navigator.userAgent)?function(){return!0}:function(){return!1};c.isFirefox=d;c=fjs.utils.Browser;d=/safari/i.test(navigator.userAgent)?function(){return!0}:function(){return!1};c.isSafari=d;c=fjs.utils.Browser;d=/Opera/i.test(navigator.userAgent)?function(){return!0}:function(){return!1};c.isOpera=d})();
(function(){namespace("fjs.utils");fjs.utils.Console=function(){};fjs.utils.Console.log=function(){console&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.bind.call(console.log,console).apply(console,arguments))};fjs.utils.Console.error=function(){console&&(console.error.apply?console.error.apply(console,arguments):Function.prototype.bind.call(console.error,console).apply(console,arguments))};fjs.utils.Console.debug=function(){console&&(console.debug?console.debug.apply?
console.debug.apply(console,arguments):Function.prototype.bind.call(console.debug,console).apply(console,arguments):fjs.utils.Console.log.apply(fjs.utils.Console,arguments))};fjs.utils.Console.warn=function(){console&&(console.warn?console.warn.apply?console.warn.apply(console,arguments):Function.prototype.bind.call(console.warn,console).apply(console,arguments):fjs.utils.Console.log.apply(fjs.utils.Console,arguments))};fjs.utils.Console.info=function(){console&&(console.info?console.info.apply?console.info.apply(console,
arguments):Function.prototype.bind.call(console.info,console).apply(console,arguments):fjs.utils.Console.log.apply(fjs.utils.Console,arguments))}})();
(function(){namespace("fjs.utils");fjs.utils.Cookies={get:function(a){return(a=document.cookie.match(RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(a[1]):void 0},set:function(a,b,c){var c=c||{},d=c.expires;if("number"==typeof d&&d){var f=new Date;f.setTime(f.getTime()+1E3*d);d=c.expires=f}d&&d.toUTCString&&(c.expires=d.toUTCString());var b=encodeURIComponent(b),a=a+"="+b,g;for(g in c)c.hasOwnProperty(g)&&(a+="; "+g,b=c[g],!0!==b&&(a+="="+b));document.cookie=
a},remove:function(a){fjs.utils.Cookies.set(a,"",{expires:-1})}}})();(function(){namespace("fjs.utils");fjs.utils.Core={asyncForIn:function(a,b,c){function d(){if(g===f.length)c();else{var e=f[g];b(e,a[e],d);g++}}var f=[],g=0,e;for(e in a)a.hasOwnProperty(e)&&f.push(e);d()}}})();namespace("fjs.utils");fjs.utils.DOM=function(){};
fjs.utils.DOM.getElementOffset=function(a){if(void 0!=a){var b=null;try{b=a.getBoundingClientRect()}catch(c){b={top:0,left:0,right:0,bottom:0}}var a=document.body,d=document.documentElement;return{x:b.left+(window.pageXOffset||d.scrollLeft||a.scrollLeft)-(d.clientLeft||a.clientLeft||0),y:b.top+(window.pageYOffset||d.scrollTop||a.scrollTop)-(d.clientTop||a.clientTop||0)}}};
fjs.utils.DOM.addClass=function(a,b){this.hasClass(a,b)||(a.classList?a.classList.add(b):a.className=(a.className+=" "+b).trim());return a};fjs.utils.DOM.hasClass=function(a,b){return a.classList?a.classList.contains(b):RegExp("(^| )"+b+"( |$)","gi").test(a.className)};fjs.utils.DOM.removeClass=function(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(RegExp("(^|\\b)"+b.split(" ").join("|")+"(\\b|$)","gi")," ").trim();return a};
fjs.utils.DOM.toggleClass=function(a,b){return this.hasClass(a,b)?this.removeClass(a,b):this.addClass(a,b)};fjs.utils.DOM.addEventListener=function(a,b,c){b="mousewheel"==b?"DOMMouseScroll":b;window.addEventListener?a.addEventListener(b,c,!1):document.attachEvent&&(a==window?window.document.attachEvent("on"+b,c):a.attachEvent("on"+b,c));"DOMMouseScroll"==b&&(a.onmousewheel=c)};
fjs.utils.DOM.removeEventListener=function(a,b,c){b="mousewheel"==b?"DOMMouseScroll":b;window.removeEventListener?a.removeEventListener(b,c,!1):document.detachEvent&&(a==window?document.detachEvent("on"+b,c):a.detachEvent("on"+b,c));"DOMMouseScroll"==b&&(a.onmousewheel=null)};
fjs.utils.DOM.createEvent=function(a,b,c){if(document.createEvent){var d=document.createEvent(a);switch(a){case "MouseEvents":d.initMouseEvent(b,!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null);break;case "UIEvents":d.initUIEvent(b,!0,!0,window,1);break;case "HTMLEvents":d.initEvent(b,!1,!0);break;default:d.initEvent(b,!0,!0)}if(c)for(var f in c)c.hasOwnProperty(f)&&(d[f]=c[f]);return d}c||(c={type:b});return document.createEventObject(c)};
fjs.utils.DOM.dispatchEvent=function(a,b){document.createEvent?a.dispatchEvent(b):a.fireEvent("on"+b.type,b)};(function(){function a(){(new Date).getSeconds();return(65536*(1+Math.random())).toString(16).substring(1,5)}fjs.utils.GUID={};fjs.utils.GUID.empty="00000000-0000-0000-0000-000000000000";fjs.utils.GUID.create=function(){return(a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()).toUpperCase()}})();
(function(){fjs.utils.Increment=function(){if(this.constructor.__instance)return this.constructor.__instance;this.constructor.__instance=this;this.counters={}};fjs.utils.Increment.prototype.get=function(a){this.counters[a]||(this.counters[a]=0);return++this.counters[a]};fjs.utils.Increment.prototype.clear=function(a){this.counters[a]=0}})();
(function(){namespace("fjs.utils");var a=fjs.utils.JSON=function(){};fjs.utils.JSON.parse=function(b){var a=null;if("string"==typeof b)try{a=JSON.parse(b)}catch(d){try{a=(new Function("return "+b+";"))()}catch(f){throw Error("Sync data error",f);}}else a=b;return a};fjs.utils.JSON.check=function(b){var c=!1;try{a.parse(b),c=!0}catch(d){}return c};fjs.utils.JSON.stringify=function(b){return"string"==typeof b?b:JSON.stringify(b)};fjs.utils.JSON.isEmpty=function(b){var a=!1,d;for(d in b)if(b.hasOwnProperty(d)){a=
!0;break}return!a}})();namespace("fjs.utils");fjs.utils.URL=function(){};fjs.utils.URL.getOrigin=function(){return window.location.origin||location.protocol+"//"+location.host+(/:/.test(location.host)?"":location.port?":"+location.port:"")};fjs.utils.URL.getFileExtension=function(a){a=/\.\w+($|\/$)/.exec(a);return null!=a?0<a.length?a[0]:"":""};fjs.utils.URL.getFileName=function(a){return-1!=a.lastIndexOf("/")?a.substring(a.lastIndexOf("/")+1).trim():a.substring(a.lastIndexOf("\\")+1).trim()};
fjs.utils.URL.getAbsoluteURL=function(a){var b=document.createElement("div");b.innerHTML='<a href="'+encodeURI(a)+'">x</a>';return b.firstChild.href};namespace("fjs.utils");fjs.utils.TimeSync=function(){if(fjs.utils.TimeSync.__instance)return fjs.utils.TimeSync.__instance;fjs.utils.TimeSync.__instance=this;this.fdpTimestamp=0};fjs.utils.TimeSync.prototype.setTimestamp=function(a){a=parseInt(a);this.fdpTimestamp=(new Date).getTime()-a};fjs.utils.TimeSync.prototype.getDefault=function(){return this.fdpTimestamp};
namespace("fjs.ajax");fjs.ajax.IAjaxProvider=function(){};fjs.ajax.IAjaxProvider.prototype.abort=function(){};fjs.ajax.IAjaxProvider.prototype.send=function(){};
(function(){namespace("fjs.ajax");fjs.ajax.IFrameRequest=function(a){this.id=a;this.status=0;this.responseText="";this.headers=this.postData=this.url=this.method=null};fjs.ajax.IFrameRequest.prototype.abort=function(){};var a=fjs.ajax.IFrameAjax=function(b){if(this.constructor.__instance)return this.constructor.__instance;this.constructor.__instance=this;var c=this;this.host=b;this.status=a.states.NOT_INITIALIZED;this.suspendRequestes=[];this.listeners={};this.requests={};this.crdmnFrame=document.getElementById("crdmnFrame");
this.compatibility=!0;this.crdmnFrame?c.status=a.states.READY:(this.status=a.states.INITIALIZATION,this.crdmnFrame=document.createElement("iframe"),this.crdmnFrame.name=this.crdmnFrame.id="crdmnFrame",this.crdmnFrame.src=this.host,this.crdmnFrame.style.width="0",this.crdmnFrame.style.height="0",this.crdmnFrame.style.visibility="hidden",this.crdmnFrame.style.position="absolute",this.crdmnFrame.style.zIndex="-1",this.crdmnFrame.onload=function(){c.status=a.states.READY;for(var b=0;b<c.suspendRequestes.length;b++)c.send(null,
null,null,null,null,c.suspendRequestes[b])},document.body.appendChild(this.crdmnFrame),window.addEventListener?window.addEventListener("message",function(a){c.onResponse(a)},!1):window.attachEvent&&window.attachEvent("onmessage",function(a){c.onResponse(a)}))};fjs.ajax.IFrameAjax.states={NOT_INITIALIZED:-1,INITIALIZATION:0,READY:1};fjs.ajax.IFrameAjax.prototype.getParamData=function(a){var c=[],d;for(d in a)a.hasOwnProperty(d)&&c.push(d+"="+a[d]);return c.join("&")};fjs.ajax.IFrameAjax.prototype.send=
function(b,c,d,f,g,e){this.compatibility?(e||(e=new fjs.ajax.IFrameRequest((new fjs.utils.Increment).get("IFrameAjaxRequest")),e.method=b,e.data=this.getParamData(f),e.url=c,(b=d.Authorization)&&(b=b.replace("auth=","")),e.authTicket=b,e.node=d.node,this.listeners[e.id]=g),this.status!=a.states.READY)?this.suspendRequestes.push(e):(this.crdmnFrame.contentWindow.postMessage(JSON.stringify(e),"*"),this.requests[e.id]=e):(e||(e=new fjs.ajax.IFrameRequest((new fjs.utils.Increment).get("IFrameAjaxRequest")),
e.method=b,e.postData=f,e.url=c,e.headers=d,this.listeners[e.id]=g),this.status!=a.states.READY)?this.suspendRequestes.push(e):(this.crdmnFrame.contentWindow.postMessage(JSON.stringify({type:"send",data:e}),"*"),this.requests[e.id]=e);return e};fjs.ajax.IFrameAjax.prototype.abort=function(a){this.compatibility||this.crdmnFrame.contentWindow.postMessage(fjs.utils.JSON.stringify({type:"abort",data:a}),"*");a.aborted=!0;a.status=0;if(this.listeners[a.id])this.listeners[a.id](a,"",!1);delete this.listeners[a.id];
delete this.requests[a.id]};fjs.ajax.IFrameAjax.prototype.onResponse=function(a){if(fjs.utils.JSON.check(a.data))if(a=fjs.utils.JSON.parse(a.data),this.compatibility){if(a){var c=a.id,d=this.requests[c];if(d){d.status=a.status;d.responseText=a.response;var f=this.listeners[c];f&&(a.error?f(d,d.responseText,!1):f(d,d.responseText,!0),delete this.listeners[c])}delete this.requests[c]}}else if(a&&"IFrameAjaxRequest"==a.type){a=a.data;c=a.id;if(d=this.requests[c])if(d.status=a.status,d.responseText=a.responseText,
f=this.listeners[c])a.error?f(d,d.responseText,!1):f(d,d.responseText,!0),delete this.listeners[c];delete this.requests[c]}}})();
(function(){namespace("fjs.ajax");fjs.ajax.XDRAjax=function(){if(this.constructor.__instance)return this.constructor.__instance;this.constructor.__instance=this};fjs.ajax.XDRAjax.prototype.send=function(a,b,c,d,f){var g=new XDomainRequest;g._onerror=g.onerror=function(a){a=a||window.event;a=a.target||g;f(a,a.responseText,!1)};g.onload=function(a){a=a||window.event;a=a.target||g;a.status=200;f(a,a.responseText,!0)};g.onprogress=function(a){a=a||window.event;fjs.utils.Console.log(a)};g.ontimeout=function(){fjs.utils.Console.error("timeout")};
g.timeout=18E4;for(var e in c)c.hasOwnProperty(e)&&(b+=(/\?/.test(b)?"&":"?")+e+"="+encodeURIComponent(c[e]));g.open(a,b);g.send(this.getParamData(d));return g};fjs.ajax.XDRAjax.prototype.getParamData=function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c+"="+a[c]);return b.join("&")};fjs.ajax.XDRAjax.prototype.abort=function(a){a.aborted=!0;a.status=0;a.abort();a._onerror({target:a})}})();
(function(){namespace("fjs.ajax");var a=fjs.ajax.XHRAjax=function(){if(this.constructor.__instance)return this.constructor.__instance;this.constructor.__instance=this};fjs.ajax.XHRAjax.states={REQUEST_NOT_INITIALIZED:0,REQUEST_CONNECTION_ESTABLISHED:1,REQUEST_RECEIVED:2,REQUEST_PROCESSING:3,REQUEST_COMPLETED:4};fjs.ajax.XHRAjax.prototype.getXmlHttp=function(){var a;try{a=new XMLHttpRequest}catch(c){try{a=ActiveXObject("Msxml2.XMLHTTP")}catch(d){try{a=ActiveXObject("Microsoft.XMLHTTP")}catch(f){a=
null}}}return a};fjs.ajax.XHRAjax.prototype.getParamData=function(a){var c=[],d;for(d in a)a.hasOwnProperty(d)&&c.push(d+"="+a[d]);return c.join("&")};fjs.ajax.XHRAjax.prototype.send=function(b,c,d,f,g){var e=this.getXmlHttp(),h;e.open(b,c);e.setRequestHeader("Content-type","application/x-www-form-urlencoded");if(d)for(h in d)d.hasOwnProperty(h)&&e.setRequestHeader(h,d[h]);e.onreadystatechange=function(){if(e.readyState===a.states.REQUEST_COMPLETED&&g)try{200===e.status?g(e,e.responseText,!0):g(e,
e.responseText,!1)}catch(b){g({status:0,responseText:"",aborted:!0},"",!1)}};e.send(this.getParamData(f));return e};fjs.ajax.XHRAjax.prototype.abort=function(b){b&&b.readyState!==a.states.REQUEST_COMPLETED&&(b.aborted=!0,b.abort())}})();fjs.EventsSource=function(){this.listeners={}};fjs.EventsSource.prototype.addEventListener=function(a,b){var c=this.listeners[a];c||(c=this.listeners[a]=[]);0>c.indexOf(b)?c.push(b):console.warn("Trying to add same listener")};
fjs.EventsSource.prototype.removeEventListener=function(a,b){var c=this.listeners[a],d;c&&-1<(d=c.indexOf(b))?c.splice(d,1):console.warn("Trying to remove not existed listener")};fjs.EventsSource.prototype.fireEvent=function(a,b){var c=this.listeners[a];if(c)for(var d=c.slice(0),f=0;f<d.length;f++)if(-1<c.indexOf(d[f]))d[f](b)};
