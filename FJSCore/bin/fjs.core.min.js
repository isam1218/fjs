'use strict';Function.prototype.extend=function(b){var a=new Function;a.prototype=b.prototype;this.prototype=new a;this.prototype.constructor=this;this.prototype.superClass=b.prototype;for(a=1;a<arguments.length;++a){var d=arguments[a],c;for(c in d.prototype)this.prototype[c]||(this.prototype[c]=d.prototype[c]);this.prototype[d.prototype.__class_name]=d.prototype}};var namespace=function(b){for(var b=b.split("."),a=self[b[0]]=self[b[0]]||{},d=1;d<b.length;d++)var c=b[d],a=a[c]=a[c]||{};return a};
namespace("fjs.utils");fjs.utils.Array=function(){};fjs.utils.Array.isArray=function(b){return Array.isArray(b)||"object"===typeof b&&"[object Array]"===b+""};
(function(){function b(){if(null==a){var b=-1,c,f;"Microsoft Internet Explorer"==navigator.appName?(c=navigator.userAgent,f=/MSIE ([0-9]{1,}[.0-9]{0,})/,null!=f.exec(c)&&(b=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(c=navigator.userAgent,f=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/,null!=f.exec(c)&&(b=parseFloat(RegExp.$1)));return a=b}return a}namespace("fjs.utils");var a=null;fjs.utils.Browser=function(){};fjs.utils.Browser.getIEVersion=b;fjs.utils.Browser.isIE=function(){var a=-1!=b();
fjs.utils.Browser.isIE=function(){return a};return fjs.utils.Browser.isIE()};fjs.utils.Browser.isIE7=function(){var a=7==b();fjs.utils.Browser.isIE7=function(){return a};return fjs.utils.Browser.isIE7()};fjs.utils.Browser.isIE8=function(){var a=8==b();fjs.utils.Browser.isIE8=function(){return a};return fjs.utils.Browser.isIE8()};fjs.utils.Browser.isIE9=function(){var a=9==b();fjs.utils.Browser.isIE9=function(){return a};return fjs.utils.Browser.isIE9()};fjs.utils.Browser.isIE10=function(){var a=10==
b();fjs.utils.Browser.isIE10=function(){return a};return fjs.utils.Browser.isIE10()};fjs.utils.Browser.isIE11=function(){var a=11==b();fjs.utils.Browser.isIE11=function(){return a};return fjs.utils.Browser.isIE11()};fjs.utils.Browser.isChrome=function(){var a=/chrom(e|ium)/i.test(navigator.userAgent);fjs.utils.Browser.isChrome=function(){return a};return fjs.utils.Browser.isChrome()};fjs.utils.Browser.isFirefox=function(){var a=/firefox/i.test(navigator.userAgent);fjs.utils.Browser.isFirefox=function(){return a};
return fjs.utils.Browser.isFirefox()};fjs.utils.Browser.isSafari=function(){var a=/safari/i.test(navigator.userAgent)&&!/chrom(e|ium)/i.test(navigator.userAgent);fjs.utils.Browser.isSafari=function(){return a};return fjs.utils.Browser.isSafari()};fjs.utils.Browser.isOpera=function(){var a=/opera/i.test(navigator.userAgent);fjs.utils.Browser.isOpera=function(){return a};return fjs.utils.Browser.isOpera()};fjs.utils.Browser.getBrowserName=function(){return fjs.utils.Browser.isIE()?"ie":fjs.utils.Browser.isFirefox()?
"firefox":fjs.utils.Browser.isChrome()?"chrome":fjs.utils.Browser.isSafari()?"safari":fjs.utils.Browser.isOpera()?"opera":""}})();
(function(){namespace("fjs.utils");fjs.utils.Console=function(){};fjs.utils.Console.log=function(){console&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.bind.call(console.log,console).apply(console,arguments))};fjs.utils.Console.error=function(){console&&(console.error.apply?console.error.apply(console,arguments):Function.prototype.bind.call(console.error,console).apply(console,arguments))};fjs.utils.Console.debug=function(){console&&(console.debug?console.debug.apply?
console.debug.apply(console,arguments):Function.prototype.bind.call(console.debug,console).apply(console,arguments):fjs.utils.Console.log.apply(fjs.utils.Console,arguments))};fjs.utils.Console.warn=function(){console&&(console.warn?console.warn.apply?console.warn.apply(console,arguments):Function.prototype.bind.call(console.warn,console).apply(console,arguments):fjs.utils.Console.log.apply(fjs.utils.Console,arguments))};fjs.utils.Console.info=function(){console&&(console.info?console.info.apply?console.info.apply(console,
arguments):Function.prototype.bind.call(console.info,console).apply(console,arguments):fjs.utils.Console.log.apply(fjs.utils.Console,arguments))}})();
(function(){namespace("fjs.utils");fjs.utils.Cookies={get:function(b){return(b=document.cookie.match(RegExp("(?:^|; )"+b.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(b[1]):void 0},set:function(b,a,d){var d=d||{},c=31536E3;if("number"==typeof c&&c){var f=new Date;f.setTime(f.getTime()+1E3*c);c=d.expires=f}c&&c.toUTCString&&(d.expires=c.toUTCString());var a=encodeURIComponent(a),b=b+"="+a,g;for(g in d)d.hasOwnProperty(g)&&(b+="; "+g,a=d[g],!0!==a&&(b+="="+a));document.cookie=
b},remove:function(b){fjs.utils.Cookies.set(b,"",{expires:-1})},check:function(){fjs.utils.Cookies.set("testCookie","testValue");var b=fjs.utils.Cookies.get("testCookie");fjs.utils.Cookies.remove("testCookie");return!!b}}})();(function(){namespace("fjs.utils");fjs.utils.Core={asyncForIn:function(b,a,d){function c(){if(g===f.length)d();else{var e=f[g];g++;a(e,b[e],c)}}var f=[],g=0,e;for(e in b)b.hasOwnProperty(e)&&f.push(e);c()}}})();namespace("fjs.utils");fjs.utils.DOM=function(){};
fjs.utils.DOM.getElementOffset=function(b){if(void 0!=b){var a=null;try{a=b.getBoundingClientRect()}catch(d){a={top:0,left:0,right:0,bottom:0}}var b=document.body,c=document.documentElement;return{x:a.left+(window.pageXOffset||c.scrollLeft||b.scrollLeft)-(c.clientLeft||b.clientLeft||0),y:a.top+(window.pageYOffset||c.scrollTop||b.scrollTop)-(c.clientTop||b.clientTop||0)}}};
fjs.utils.DOM.addClass=function(b,a){this.hasClass(b,a)||(b.classList?b.classList.add(a):b.className=(b.className+=" "+a).trim());return b};fjs.utils.DOM.hasClass=function(b,a){return b.classList?b.classList.contains(a):RegExp("(^| )"+a+"( |$)","gi").test(b.className)};fjs.utils.DOM.removeClass=function(b,a){b.classList?b.classList.remove(a):b.className=b.className.replace(RegExp("(^|\\b)"+a.split(" ").join("|")+"(\\b|$)","gi")," ").trim();return b};
fjs.utils.DOM.toggleClass=function(b,a){return this.hasClass(b,a)?this.removeClass(b,a):this.addClass(b,a)};fjs.utils.DOM.addEventListener=function(b,a,d){a="mousewheel"==a?"DOMMouseScroll":a;window.addEventListener?b.addEventListener(a,d,!1):document.attachEvent&&(b==window?window.document.attachEvent("on"+a,d):b.attachEvent("on"+a,d));"DOMMouseScroll"==a&&(b.onmousewheel=d)};
fjs.utils.DOM.removeEventListener=function(b,a,d){a="mousewheel"==a?"DOMMouseScroll":a;window.removeEventListener?b.removeEventListener(a,d,!1):document.detachEvent&&(b==window?document.detachEvent("on"+a,d):b.detachEvent("on"+a,d));"DOMMouseScroll"==a&&(b.onmousewheel=null)};
fjs.utils.DOM.createEvent=function(b,a,d){if(document.createEvent){var c=document.createEvent(b);switch(b){case "MouseEvents":c.initMouseEvent(a,!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null);break;case "UIEvents":c.initUIEvent(a,!0,!0,window,1);break;case "HTMLEvents":c.initEvent(a,!1,!0);break;default:c.initEvent(a,!0,!0)}if(d)for(var f in d)d.hasOwnProperty(f)&&(c[f]=d[f]);return c}d||(d={type:a});return document.createEventObject(d)};
fjs.utils.DOM.dispatchEvent=function(b,a){document.createEvent?b.dispatchEvent(a):b.fireEvent("on"+a.type,a)};fjs.utils.DOM.doGetCaretPosition=function(b){var a=0;if(document.selection)b.focus(),a=document.selection.createRange(),a.moveStart("character",-b.value.length),a=a.text.length;else if(b.selectionStart||"0"==b.selectionStart)a=b.selectionStart;return a};
fjs.utils.DOM.setCursor=function(b,a){if(null!=b)if(b.createTextRange){var d=b.createTextRange();d.move("character",a);d.select()}else b.selectionStart?(b.focus(),b.setSelectionRange(a,a)):b.focus()};(function(){function b(){(new Date).getSeconds();return(65536*(1+Math.random())).toString(16).substring(1,5)}fjs.utils.GUID={};fjs.utils.GUID.empty="00000000-0000-0000-0000-000000000000";fjs.utils.GUID.create=function(){return(b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()).toUpperCase()}})();
(function(){fjs.utils.Increment=function(){if(this.constructor.__instance)return this.constructor.__instance;this.constructor.__instance=this;this.counters={}};fjs.utils.Increment.prototype.get=function(b){this.counters[b]||(this.counters[b]=0);return++this.counters[b]};fjs.utils.Increment.prototype.clear=function(b){this.counters[b]=0}})();
(function(){namespace("fjs.utils");var b=fjs.utils.JSON=function(){};fjs.utils.JSON.parse=function(a){var b=null;if("string"==typeof a)try{b=JSON.parse(a)}catch(c){try{b=(new Function("return "+a+";"))()}catch(f){throw Error("Sync data error",f);}}else b=a;return b};fjs.utils.JSON.check=function(a){var d=!1;try{b.parse(a),d=!0}catch(c){}return d};fjs.utils.JSON.stringify=function(a){return"string"==typeof a?a:JSON.stringify(a)};fjs.utils.JSON.isEmpty=function(a){var b=!1,c;for(c in a)if(a.hasOwnProperty(c)){b=
!0;break}return!b}})();fjs.utils.LocalStorage=function(){};fjs.utils.LocalStorage._enabled=null;fjs.utils.LocalStorage.check=function(){if(null!==fjs.utils.LocalStorage._enabled)return fjs.utils.LocalStorage._enabled;try{if("undefined"===typeof self.localStorage)return fjs.utils.LocalStorage._enabled=!1;var b=null;localStorage.setItem("test","test");b=localStorage.getItem("test");localStorage.removeItem("test");fjs.utils.LocalStorage._enabled=!!b}catch(a){fjs.utils.LocalStorage._enabled=!1}return fjs.utils.LocalStorage._enabled};
fjs.utils.LocalStorage.get=function(b){if(fjs.utils.LocalStorage.check())return self.localStorage.getItem(b)};fjs.utils.LocalStorage.set=function(b,a){fjs.utils.LocalStorage.check()&&self.localStorage.setItem(b,a)};fjs.utils.LocalStorage.remove=function(b){fjs.utils.LocalStorage.check()&&self.localStorage.removeItem(b)};namespace("fjs.utils");fjs.utils.URL=function(){};
fjs.utils.URL.getOrigin=function(){return window.location.origin||location.protocol+"//"+location.host+(/:/.test(location.host)?"":location.port?":"+location.port:"")};fjs.utils.URL.getFileExtension=function(b){b=/\.\w+($|\/$)/.exec(b);return null!=b?0<b.length?b[0]:"":""};fjs.utils.URL.getFileName=function(b){return-1!=b.lastIndexOf("/")?b.substring(b.lastIndexOf("/")+1).trim():b.substring(b.lastIndexOf("\\")+1).trim()};
fjs.utils.URL.getAbsoluteURL=function(b){var a=document.createElement("div");a.innerHTML='<a href="'+encodeURI(b)+'">x</a>';return a.firstChild.href};namespace("fjs.utils");fjs.utils.TimeSync=function(){if(fjs.utils.TimeSync.__instance)return fjs.utils.TimeSync.__instance;fjs.utils.TimeSync.__instance=this;this.fdpTimestamp=0};fjs.utils.TimeSync.prototype.setTimestamp=function(b){b=parseInt(b);this.fdpTimestamp=(new Date).getTime()-b};fjs.utils.TimeSync.prototype.getDefault=function(){return this.fdpTimestamp};
namespace("fjs.ajax");fjs.ajax.IAjaxProvider=function(){};fjs.ajax.IAjaxProvider.prototype.abort=function(){};fjs.ajax.IAjaxProvider.prototype.send=function(){};
(function(){namespace("fjs.ajax");fjs.ajax.IFrameRequest=function(a){this.id=a;this.status=0;this.responseText="";this.headers=this.postData=this.url=this.method=null};fjs.ajax.IFrameRequest.prototype.abort=function(){};var b=fjs.ajax.IFrameAjax=function(a){if(this.constructor.__instance)return this.constructor.__instance;this.constructor.__instance=this;var d=this;this.host=a;this.status=b.states.NOT_INITIALIZED;this.suspendRequestes=[];this.listeners={};this.requests={};this.crdmnFrame=document.getElementById("crdmnFrame");
this.compatibility=!0;this.crdmnFrame?d.status=b.states.READY:(this.status=b.states.INITIALIZATION,this.crdmnFrame=document.createElement("iframe"),this.crdmnFrame.name=this.crdmnFrame.id="crdmnFrame",this.crdmnFrame.src=this.host,this.crdmnFrame.style.width="0",this.crdmnFrame.style.height="0",this.crdmnFrame.style.visibility="hidden",this.crdmnFrame.style.position="absolute",this.crdmnFrame.style.zIndex="-1",this.crdmnFrame.onload=function(){d.status=b.states.READY;for(var a=0;a<d.suspendRequestes.length;a++)d.send(null,
null,null,null,null,d.suspendRequestes[a])},document.body.appendChild(this.crdmnFrame),window.addEventListener?window.addEventListener("message",function(a){d.onResponse(a)},!1):window.attachEvent&&window.attachEvent("onmessage",function(a){d.onResponse(a)}))};fjs.ajax.IFrameAjax.states={NOT_INITIALIZED:-1,INITIALIZATION:0,READY:1};fjs.ajax.IFrameAjax.prototype.getParamData=function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c+"="+a[c]);return b.join("&")};fjs.ajax.IFrameAjax.prototype.send=
function(a,d,c,f,g,e){this.compatibility?(e||(e=new fjs.ajax.IFrameRequest((new fjs.utils.Increment).get("IFrameAjaxRequest")),e.method=a,e.data=this.getParamData(f),e.url=d,(a=c.Authorization)&&(a=a.replace("auth=","")),e.authTicket=a,e.node=c.node,this.listeners[e.id]=g),this.status!=b.states.READY)?this.suspendRequestes.push(e):(this.crdmnFrame.contentWindow.postMessage(JSON.stringify(e),"*"),this.requests[e.id]=e):(e||(e=new fjs.ajax.IFrameRequest((new fjs.utils.Increment).get("IFrameAjaxRequest")),
e.method=a,e.postData=f,e.url=d,e.headers=c,this.listeners[e.id]=g),this.status!=b.states.READY)?this.suspendRequestes.push(e):(this.crdmnFrame.contentWindow.postMessage(JSON.stringify({type:"send",data:e}),"*"),this.requests[e.id]=e);return e};fjs.ajax.IFrameAjax.prototype.abort=function(a){this.compatibility||this.crdmnFrame.contentWindow.postMessage(fjs.utils.JSON.stringify({type:"abort",data:a}),"*");a.aborted=!0;a.status=0;if(this.listeners[a.id])this.listeners[a.id](a,"",!1);delete this.listeners[a.id];
delete this.requests[a.id]};fjs.ajax.IFrameAjax.prototype.onResponse=function(a){if(fjs.utils.JSON.check(a.data))if(a=fjs.utils.JSON.parse(a.data),this.compatibility){if(a){var b=a.id,c=this.requests[b];if(c){c.status=a.status;c.responseText=a.response;var f=this.listeners[b];f&&(a.error?f(c,c.responseText,!1):f(c,c.responseText,!0),delete this.listeners[b])}delete this.requests[b]}}else if(a&&"IFrameAjaxRequest"==a.type){a=a.data;b=a.id;if(c=this.requests[b])if(c.status=a.status,c.responseText=a.responseText,
f=this.listeners[b])a.error?f(c,c.responseText,!1):f(c,c.responseText,!0),delete this.listeners[b];delete this.requests[b]}}})();
(function(){namespace("fjs.ajax");fjs.ajax.XDRAjax=function(){if(this.constructor.__instance)return this.constructor.__instance;this.constructor.__instance=this};fjs.ajax.XDRAjax.prototype.send=function(b,a,d,c,f){var g=new XDomainRequest;g._onerror=g.onerror=function(a){a=a||window.event;a=a.target||g;f(a,a.responseText,!1)};g.onload=function(a){a=a||window.event;a=a.target||g;a.status=200;f(a,a.responseText,!0)};g.onprogress=function(a){a=a||window.event;fjs.utils.Console.log(a)};g.ontimeout=function(){fjs.utils.Console.error("timeout")};
g.timeout=18E4;for(var e in d)d.hasOwnProperty(e)&&(a+=(/\?/.test(a)?"&":"?")+e+"="+encodeURIComponent(d[e]));g.open(b,a);g.send(this.getParamData(c));return g};fjs.ajax.XDRAjax.prototype.getParamData=function(b){var a=[],d;for(d in b)b.hasOwnProperty(d)&&a.push(d+"="+b[d]);return a.join("&")};fjs.ajax.XDRAjax.prototype.abort=function(b){b.aborted=!0;b.status=0;b.abort();b._onerror({target:b})}})();
(function(){namespace("fjs.ajax");var b=fjs.ajax.XHRAjax=function(){if(this.constructor.__instance)return this.constructor.__instance;this.constructor.__instance=this};fjs.ajax.XHRAjax.states={REQUEST_NOT_INITIALIZED:0,REQUEST_CONNECTION_ESTABLISHED:1,REQUEST_RECEIVED:2,REQUEST_PROCESSING:3,REQUEST_COMPLETED:4};fjs.ajax.XHRAjax.prototype.getXmlHttp=function(){var a;try{a=new XMLHttpRequest}catch(b){try{a=ActiveXObject("Msxml2.XMLHTTP")}catch(c){try{a=ActiveXObject("Microsoft.XMLHTTP")}catch(f){a=
null}}}return a};fjs.ajax.XHRAjax.prototype.getParamData=function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c+"="+a[c]);return b.join("&")};fjs.ajax.XHRAjax.prototype.send=function(a,d,c,f,g){var e=this.getXmlHttp(),h;e.open(a,d);e.setRequestHeader("Content-type","application/x-www-form-urlencoded");if(c)for(h in c)c.hasOwnProperty(h)&&e.setRequestHeader(h,c[h]);e.onreadystatechange=function(){if(e.readyState===b.states.REQUEST_COMPLETED&&g)try{200===e.status?g(e,e.responseText,!0):g(e,
e.responseText,!1)}catch(a){g({status:0,responseText:"",aborted:!0},"",!1)}};e.send(this.getParamData(f));return e};fjs.ajax.XHRAjax.prototype.abort=function(a){a&&a.readyState!==b.states.REQUEST_COMPLETED&&(a.aborted=!0,a.abort())}})();fjs.EventsSource=function(){this.listeners={}};fjs.EventsSource.prototype.addEventListener=function(b,a){var d=this.listeners[b];d||(d=this.listeners[b]=[]);0>d.indexOf(a)?d.push(a):console.warn("Trying to add same listener")};
fjs.EventsSource.prototype.removeEventListener=function(b,a){var d=this.listeners[b],c;d&&-1<(c=d.indexOf(a))?d.splice(c,1):console.warn("Trying to remove not existed listener")};fjs.EventsSource.prototype.fireEvent=function(b,a){var d=this.listeners[b];if(d)for(var c=d.slice(0),f=0;f<c.length;f++)if(-1<d.indexOf(c[f]))c[f](a)};
